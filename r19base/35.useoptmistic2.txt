1:"$Sreact.fragment"
2:I[51790,["7525","static/chunks/7525-411280bffc37a107.js","8173","static/chunks/8173-1aab990e083a60ce.js","5926","static/chunks/5926-2f921190ce1e6581.js","3974","static/chunks/3974-a1a1a9aca3315bf5.js","7177","static/chunks/app/layout-42df43a67d50e5c7.js"],"default"]
3:I[73974,["7525","static/chunks/7525-411280bffc37a107.js","8173","static/chunks/8173-1aab990e083a60ce.js","5926","static/chunks/5926-2f921190ce1e6581.js","3974","static/chunks/3974-a1a1a9aca3315bf5.js","7177","static/chunks/app/layout-42df43a67d50e5c7.js"],"default"]
4:I[15244,[],""]
5:I[43866,[],""]
6:I[14547,[],"ClientSegmentRoot"]
7:I[34489,["7525","static/chunks/7525-411280bffc37a107.js","8173","static/chunks/8173-1aab990e083a60ce.js","5926","static/chunks/5926-2f921190ce1e6581.js","3974","static/chunks/3974-a1a1a9aca3315bf5.js","8083","static/chunks/app/r19base/layout-2cc320d5b72f6d0a.js"],"default"]
9:I[98087,["8150","static/chunks/7cfd557f-0718c923d48595ad.js","7525","static/chunks/7525-411280bffc37a107.js","4320","static/chunks/4320-eb0b4108191194bc.js","8173","static/chunks/8173-1aab990e083a60ce.js","3152","static/chunks/3152-e813ba8dd61cd947.js","8993","static/chunks/8993-6412cbf42ee52bf5.js","8548","static/chunks/app/r19base/(5.formaction)/35.useoptmistic2/layout-e6d320dfd8ad635d.js"],"default"]
a:I[88592,["7525","static/chunks/7525-411280bffc37a107.js","4320","static/chunks/4320-eb0b4108191194bc.js","5926","static/chunks/5926-2f921190ce1e6581.js","2794","static/chunks/2794-e7741df2722cee1f.js","8763","static/chunks/app/r19base/(5.formaction)/35.useoptmistic2/page-35e0ca45d0ad7852.js"],"default"]
10:I[86213,[],"OutletBoundary"]
12:I[86213,[],"MetadataBoundary"]
14:I[86213,[],"ViewportBoundary"]
16:I[34835,[],""]
:HL["/_next/static/media/569ce4b8f30dc480-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/d498c84e4ab246b3.css","style"]
:HL["/_next/static/css/894ed73796737685.css","style"]
:HL["/_next/static/css/738174a5e4c964fb.css","style"]
:HL["/_next/static/css/17904d092d77f54f.css","style"]
:HL["/_next/static/css/9f294032a6ebc240.css","style"]
0:{"P":null,"b":"8NHiCZJp1GrYIFaHBSRIc","p":"","c":["","r19base","35.useoptmistic2"],"i":false,"f":[[["",{"children":["r19base",{"children":["(5.formaction)",{"children":["35.useoptmistic2",{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/d498c84e4ab246b3.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/894ed73796737685.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/738174a5e4c964fb.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","3",{"rel":"stylesheet","href":"/_next/static/css/17904d092d77f54f.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"zh","suppressHydrationWarning":true,"children":[["$","head",null,{"children":[["$","meta",null,{"charSet":"UTF-8"}],["$","link",null,{"href":"https://framerusercontent.com/images/YRd2KCq4G2aXNg15aHvl7AtcGQ.png","rel":"icon","media":"(prefers-color-scheme: light)"}],["$","link",null,{"rel":"stylesheet","href":"https://rsms.me/inter/inter.css"}],["$","link",null,{"rel":"stylesheet","href":"https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css","integrity":"sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV","crossOrigin":"anonymous"}],["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1.0 maximum-scale=1, user-scalable=no"}],["$","meta",null,{"name":"mobile-web-app-capable","content":"yes"}],["$","meta",null,{"name":"apple-mobile-web-app-status-bar-style","content":"black-translucent"}]]}],["$","body",null,{"className":"__variable_4d318d __variable_ea5f4b antialiased","children":["$","$L2",null,{"children":[["$","$L3",null,{}],["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[],[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]]}]}]]}]]}],{"children":["r19base",["$","$1","c",{"children":[null,["$","$L6",null,{"Component":"$7","slots":{"children":["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","r19base","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]},"params":{},"promise":"$@8"}]]}],{"children":["(5.formaction)",["$","$1","c",{"children":[null,["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","r19base","children","(5.formaction)","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["35.useoptmistic2",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/9f294032a6ebc240.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L9",null,{"children":["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","r19base","children","(5.formaction)","children","35.useoptmistic2","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]}]]}],{"children":["__PAGE__",["$","$1","c",{"children":[[["$","$La",null,{}],"\n","$Lb","\n",["$","p",null,{"children":"在上一章的案例中，当我们快速发送多条信息时，我们发现，并不是每一条消息都被成功合并到真实状态中了。最终结果是有的消息不见了。这一章我们开始来思考这个问题。"}],"\n",["$","h3",null,{"id":"1结合-usetransition","children":"1、结合 useTransition"}],"\n",["$","p",null,{"children":["我们可以结合 ",["$","code",null,{"children":"useTransition"}]," 来防止用户连续触发 ",["$","code",null,{"children":"formAction"}]," 的执行"]}],"\n","$Lc","\n",["$","p",null,{"children":"formAction 的定义调整为："}],"\n","$Ld","\n",["$","p",null,{"children":["然后使用 ",["$","code",null,{"children":"isPending"}]," 来控制输入的禁用状态"]}],"\n","$Le","\n",["$","p",null,{"children":"最终效果如下"}],"\n",["$","$La",null,{}],"\n","$Lf","\n",["$","h3",null,{"id":"2问题","children":"2、问题"}],"\n",["$","p",null,{"children":"这能解决一定的问题，如果需求合适的话，可以直接使用这种方案。"}],"\n",["$","p",null,{"children":["但是，如果我们期望的是，",["$","strong",null,{"children":"连续输入依然能够发生"}],"，在这个基础之上我们可以控制好数据的合并逻辑，那么借助 react 19 的机制，我们可以如何实现呢？"]}]],null,["$","$L10",null,{"children":"$L11"}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","akAEgCbIosAG69UQ_Wrrj",{"children":[["$","$L12",null,{"children":"$L13"}],["$","$L14",null,{"children":"$L15"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}]]}],false]],"m":"$undefined","G":["$16","$undefined"],"s":false,"S":true}
8:{}
17:I[34034,["7525","static/chunks/7525-411280bffc37a107.js","4320","static/chunks/4320-eb0b4108191194bc.js","5926","static/chunks/5926-2f921190ce1e6581.js","2794","static/chunks/2794-e7741df2722cee1f.js","8763","static/chunks/app/r19base/(5.formaction)/35.useoptmistic2/page-35e0ca45d0ad7852.js"],"default"]
18:I[65470,["7525","static/chunks/7525-411280bffc37a107.js","4320","static/chunks/4320-eb0b4108191194bc.js","5926","static/chunks/5926-2f921190ce1e6581.js","2794","static/chunks/2794-e7741df2722cee1f.js","8763","static/chunks/app/r19base/(5.formaction)/35.useoptmistic2/page-35e0ca45d0ad7852.js"],"CodeTabHeader"]
1a:I[65703,["7525","static/chunks/7525-411280bffc37a107.js","4320","static/chunks/4320-eb0b4108191194bc.js","5926","static/chunks/5926-2f921190ce1e6581.js","2794","static/chunks/2794-e7741df2722cee1f.js","8763","static/chunks/app/r19base/(5.formaction)/35.useoptmistic2/page-35e0ca45d0ad7852.js"],"CodeTabsInner"]
c:["$","div",null,{"className":"code-wrapper border my-4 border-gray-200 rounded overflow-hidden","children":[null,["$","div",null,{"className":"code-base javascript","children":[false,["$","pre",null,{"data-theme":"github-from-css","data-lang":"javascript","ref":"$undefined","data-ch":true,"children":["$","div",null,{"style":{"minWidth":"fit-content"},"children":[["$","div","1,1",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":14,"height":14,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-terminal","children":[["$","polyline","akl6gq",{"points":"4 17 10 11 4 5"}],["$","line","q2wloq",{"x1":"12","x2":"20","y1":"19","y2":"19"}],"$undefined"]}]}],["$","div",null,{"children":[["$","span","0",{"style":{"color":"var(--ch-7)"},"children":"const"}]," ",["$","span","2",{"style":{"color":"var(--ch-4)"},"children":"["}],["$","span","3",{"style":{"color":"var(--ch-2)"},"children":"isPending"}],["$","span","4",{"style":{"color":"var(--ch-4)"},"children":","}]," ",["$","span","6",{"style":{"color":"var(--ch-2)"},"children":"startTransition"}],["$","span","7",{"style":{"color":"var(--ch-4)"},"children":"]"}]," ",["$","span","9",{"style":{"color":"var(--ch-7)"},"children":"="}]," ",["$","span","11",{"style":{"color":"var(--ch-5)"},"children":"useTransition"}],["$","span","12",{"style":{"color":"var(--ch-4)"},"children":"()"}]],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}]]}]}]]}]]}]
d:["$","div",null,{"className":"code-wrapper border my-4 border-gray-200 rounded overflow-hidden","children":[null,["$","div",null,{"className":"code-base typescript","children":[false,["$","pre",null,{"data-theme":"github-from-css","data-lang":"typescript","ref":"$undefined","data-ch":true,"children":["$","div",null,{"style":{"minWidth":"fit-content"},"children":[["$","div","1,1",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[1,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":[["$","span","0",{"style":{"color":"var(--ch-7)"},"children":"function"}]," ",["$","span","2",{"style":{"color":"var(--ch-5)"},"children":"formAction"}],["$","span","3",{"style":{"color":"var(--ch-4)"},"children":"("}],["$","span","4",{"style":{"color":"var(--ch-3)"},"children":"formData"}],["$","span","5",{"style":{"color":"var(--ch-7)"},"children":":"}]," ",["$","span","7",{"style":{"color":"var(--ch-3)"},"children":"FormData"}],["$","span","8",{"style":{"color":"var(--ch-4)"},"children":") {"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","2,2",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[2,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["  ",["$","span","1",{"style":{"color":"var(--ch-7)"},"children":"let"}]," ",["$","span","3",{"style":{"color":"var(--ch-4)"},"children":"newMessage"}]," ",["$","span","5",{"style":{"color":"var(--ch-7)"},"children":"="}]," ",["$","span","7",{"style":{"color":"var(--ch-4)"},"children":"formData."}],["$","span","8",{"style":{"color":"var(--ch-5)"},"children":"get"}],["$","span","9",{"style":{"color":"var(--ch-4)"},"children":"("}],["$","span","10",{"style":{"color":"var(--ch-8)"},"children":"\"message\""}],["$","span","11",{"style":{"color":"var(--ch-4)"},"children":")"}]," ",["$","span","13",{"style":{"color":"var(--ch-7)"},"children":"as"}]," ",["$","span","15",{"style":{"color":"var(--ch-2)"},"children":"string"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","3,3",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[3,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["  ",["$","span","1",{"style":{"color":"var(--ch-4)"},"children":"form.current."}],["$","span","2",{"style":{"color":"var(--ch-5)"},"children":"reset"}],["$","span","3",{"style":{"color":"var(--ch-4)"},"children":"();"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","4,4",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[4,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","5,5",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[5,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["  ",["$","span","1",{"style":{"color":"var(--ch-5)"},"children":"startTransition"}],["$","span","2",{"style":{"color":"var(--ch-4)"},"children":"("}],["$","span","3",{"style":{"color":"var(--ch-7)"},"children":"async"}]," ",["$","span","5",{"style":{"color":"var(--ch-4)"},"children":"()"}]," ",["$","span","7",{"style":{"color":"var(--ch-7)"},"children":"=>"}]," ",["$","span","9",{"style":{"color":"var(--ch-4)"},"children":"{"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","6,6",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[6,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["    ",["$","span","1",{"style":{"color":"var(--ch-5)"},"children":"addOptimisticMessage"}],["$","span","2",{"style":{"color":"var(--ch-4)"},"children":"({ value: newMessage, id:"}]," ",["$","span","4",{"style":{"color":"var(--ch-5)"},"children":"uuid"}],["$","span","5",{"style":{"color":"var(--ch-4)"},"children":"() });"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","7,7",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[7,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["    ",["$","span","1",{"style":{"color":"var(--ch-7)"},"children":"let"}]," ",["$","span","3",{"style":{"color":"var(--ch-4)"},"children":"msg"}]," ",["$","span","5",{"style":{"color":"var(--ch-7)"},"children":"= await"}]," ",["$","span","7",{"style":{"color":"var(--ch-5)"},"children":"getMessage"}],["$","span","8",{"style":{"color":"var(--ch-4)"},"children":"(newMessage);"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","8,8",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[8,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["    ",["$","span","1",{"style":{"color":"var(--ch-5)"},"children":"setMessages"}],["$","span","2",{"style":{"color":"var(--ch-4)"},"children":"(["}],["$","span","3",{"style":{"color":"var(--ch-7)"},"children":"..."}],["$","span","4",{"style":{"color":"var(--ch-4)"},"children":"messages, msg])"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","9,9",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[9,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["  ",["$","span","1",{"style":{"color":"var(--ch-4)"},"children":"})"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","10,10",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[10,["$","span",null,{"className":"invisible","children":""}]]}]}],["$","div",null,{"children":[["$","span","0",{"style":{"color":"var(--ch-4)"},"children":"}"}]],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}]]}]}]]}]]}]
19:T538,import { useOptimistic, useState, useRef, useTransition } from "react"
import { getMessage } from './api'
import { reducer, Message } from './reducer'
import { uuid } from '@/utils';

export default function Index() {
  const [messages, setMessages] = useState<Message[]>([]);
  const [optimisticMessages, addOptimisticMessage] = useOptimistic(messages, reducer);
  const [isPending, startTransition] = useTransition()

  const form = useRef<any>(null);

  function formAction(formData: FormData) {
    let newMessage = formData.get("message") as string
    form.current.reset();

    startTransition(async () => {
      addOptimisticMessage({ value: newMessage, id: uuid() });
      let msg = await getMessage(newMessage);
      setMessages([...messages, msg])
    })
  }

  return (
    <>
      <form action={formAction} ref={form} className='flex'>
        <input disabled={isPending} type="text" name="message" placeholder="enter your message" />
        <button disabled={isPending} type="submit" className='button ml-2'>Send</button>
      </form>

      {optimisticMessages.map((message) => (
        <div key={message.id} className='indent-1 text-slate-600 mt-1 hover:bg-slate-100 p-2 cursor-pointer rounded'>
          {message.value} {!!message.sending && <small> (Sending...)</small>}
        </div>
      ))}
    </>
  );
}1b:T538,import { useOptimistic, useState, useRef, useTransition } from "react"
import { getMessage } from './api'
import { reducer, Message } from './reducer'
import { uuid } from '@/utils';

export default function Index() {
  const [messages, setMessages] = useState<Message[]>([]);
  const [optimisticMessages, addOptimisticMessage] = useOptimistic(messages, reducer);
  const [isPending, startTransition] = useTransition()

  const form = useRef<any>(null);

  function formAction(formData: FormData) {
    let newMessage = formData.get("message") as string
    form.current.reset();

    startTransition(async () => {
      addOptimisticMessage({ value: newMessage, id: uuid() });
      let msg = await getMessage(newMessage);
      setMessages([...messages, msg])
    })
  }

  return (
    <>
      <form action={formAction} ref={form} className='flex'>
        <input disabled={isPending} type="text" name="message" placeholder="enter your message" />
        <button disabled={isPending} type="submit" className='button ml-2'>Send</button>
      </form>

      {optimisticMessages.map((message) => (
        <div key={message.id} className='indent-1 text-slate-600 mt-1 hover:bg-slate-100 p-2 cursor-pointer rounded'>
          {message.value} {!!message.sending && <small> (Sending...)</small>}
        </div>
      ))}
    </>
  );
}1c:T538,import { useOptimistic, useState, useRef, useTransition } from "react"
import { getMessage } from './api'
import { reducer, Message } from './reducer'
import { uuid } from '@/utils';

export default function Index() {
  const [messages, setMessages] = useState<Message[]>([]);
  const [optimisticMessages, addOptimisticMessage] = useOptimistic(messages, reducer);
  const [isPending, startTransition] = useTransition()

  const form = useRef<any>(null);

  function formAction(formData: FormData) {
    let newMessage = formData.get("message") as string
    form.current.reset();

    startTransition(async () => {
      addOptimisticMessage({ value: newMessage, id: uuid() });
      let msg = await getMessage(newMessage);
      setMessages([...messages, msg])
    })
  }

  return (
    <>
      <form action={formAction} ref={form} className='flex'>
        <input disabled={isPending} type="text" name="message" placeholder="enter your message" />
        <button disabled={isPending} type="submit" className='button ml-2'>Send</button>
      </form>

      {optimisticMessages.map((message) => (
        <div key={message.id} className='indent-1 text-slate-600 mt-1 hover:bg-slate-100 p-2 cursor-pointer rounded'>
          {message.value} {!!message.sending && <small> (Sending...)</small>}
        </div>
      ))}
    </>
  );
}b:["$","div",null,{"className":"code-tabs border rounded border-gray-200 overflow-hidden my-5","children":["$","$L17",null,{"children":[["$","$L18",null,{"tabs":[{"meta":"index.tsx -c","value":"$19","lang":"jsx"},{"meta":"reducer.ts -c","value":"export interface Message {\n  value: string,\n  id: string,\n  sending?: boolean\n}\n\nexport function reducer(state: Message[], newMessage: Message) {\n  let newItem = {\n    ...newMessage,\n    sending: true\n  }\n  return [...state, newItem]\n}","lang":"jsx"},{"meta":"api.ts -c","value":"import { uuid } from '@/utils';\n\nvar requestOptions: RequestInit = {\n  method: 'GET',\n  redirect: 'follow'\n};\n\nconst url = 'https://randomuser.me/api/?results=2&inc=name,gender,email,nat,picture&noinfo'\n\nexport async function getMessage(msg: string) {\n  await fetch(url, requestOptions)\n  return { value: msg, id: uuid()}\n}","lang":"jsx"}]}],["$","$L1a",null,{"highlighteds":[{"meta":"index.tsx -c","value":"$1b","lang":"jsx","code":"$1c","tokens":[["import","var(--ch-7)"]," ",["{ useOptimistic, useState, useRef, useTransition }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["\"react\"","var(--ch-8)"],"\n",["import","var(--ch-7)"]," ",["{ getMessage }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'./api'","var(--ch-8)"],"\n",["import","var(--ch-7)"]," ",["{ reducer, Message }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'./reducer'","var(--ch-8)"],"\n",["import","var(--ch-7)"]," ",["{ uuid }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'@/utils'","var(--ch-8)"],[";","var(--ch-4)"],"\n\n",["export default function","var(--ch-7)"]," ",["Index","var(--ch-5)"],["()","var(--ch-3)"]," ",["{","var(--ch-4)"],"\n  ",["const","var(--ch-7)"]," ",["[","var(--ch-4)"],["messages","var(--ch-2)"],[",","var(--ch-4)"]," ",["setMessages","var(--ch-2)"],["]","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["useState","var(--ch-5)"],["<","var(--ch-4)"],["Message","var(--ch-3)"],["[]>([]);","var(--ch-4)"],"\n  ",["const","var(--ch-7)"]," ",["[","var(--ch-4)"],["optimisticMessages","var(--ch-2)"],[",","var(--ch-4)"]," ",["addOptimisticMessage","var(--ch-2)"],["]","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["useOptimistic","var(--ch-5)"],["(messages, reducer);","var(--ch-4)"],"\n  ",["const","var(--ch-7)"]," ",["[","var(--ch-4)"],["isPending","var(--ch-2)"],[",","var(--ch-4)"]," ",["startTransition","var(--ch-2)"],["]","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["useTransition","var(--ch-5)"],["()","var(--ch-4)"],"\n\n  ",["const","var(--ch-7)"]," ",["form","var(--ch-2)"]," ",["=","var(--ch-7)"]," ",["useRef","var(--ch-5)"],["<","var(--ch-4)"],["any","var(--ch-2)"],[">(","var(--ch-4)"],["null","var(--ch-2)"],[");","var(--ch-4)"],"\n\n  ",["function","var(--ch-7)"]," ",["formAction","var(--ch-5)"],["(","var(--ch-4)"],["formData","var(--ch-3)"],[":","var(--ch-7)"]," ",["FormData","var(--ch-3)"],[") {","var(--ch-4)"],"\n    ",["let","var(--ch-7)"]," ",["newMessage","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["formData.","var(--ch-4)"],["get","var(--ch-5)"],["(","var(--ch-4)"],["\"message\"","var(--ch-8)"],[")","var(--ch-4)"]," ",["as","var(--ch-7)"]," ",["string","var(--ch-2)"],"\n    ",["form.current.","var(--ch-4)"],["reset","var(--ch-5)"],["();","var(--ch-4)"],"\n\n    ",["startTransition","var(--ch-5)"],["(","var(--ch-4)"],["async","var(--ch-7)"]," ",["()","var(--ch-4)"]," ",["=>","var(--ch-7)"]," ",["{","var(--ch-4)"],"\n      ",["addOptimisticMessage","var(--ch-5)"],["({ value: newMessage, id:","var(--ch-4)"]," ",["uuid","var(--ch-5)"],["() });","var(--ch-4)"],"\n      ",["let","var(--ch-7)"]," ",["msg","var(--ch-4)"]," ",["= await","var(--ch-7)"]," ",["getMessage","var(--ch-5)"],["(newMessage);","var(--ch-4)"],"\n      ",["setMessages","var(--ch-5)"],["([","var(--ch-4)"],["...","var(--ch-7)"],["messages, msg])","var(--ch-4)"],"\n    ",["})","var(--ch-4)"],"\n  ",["}","var(--ch-4)"],"\n\n  ",["return","var(--ch-7)"]," ",["(","var(--ch-4)"],"\n    ",["<>","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["form","var(--ch-6)"]," ",["action","var(--ch-2)"],["={","var(--ch-7)"],["formAction","var(--ch-4)"],["}","var(--ch-7)"]," ",["ref","var(--ch-2)"],["={","var(--ch-7)"],["form","var(--ch-4)"],["}","var(--ch-7)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'flex'","var(--ch-8)"],[">","var(--ch-4)"],"\n        ",["<","var(--ch-4)"],["input","var(--ch-6)"]," ",["disabled","var(--ch-2)"],["={","var(--ch-7)"],["isPending","var(--ch-4)"],["}","var(--ch-7)"]," ",["type","var(--ch-2)"],["=","var(--ch-7)"],["\"text\"","var(--ch-8)"]," ",["name","var(--ch-2)"],["=","var(--ch-7)"],["\"message\"","var(--ch-8)"]," ",["placeholder","var(--ch-2)"],["=","var(--ch-7)"],["\"enter your message\"","var(--ch-8)"]," ",["/>","var(--ch-4)"],"\n        ",["<","var(--ch-4)"],["button","var(--ch-6)"]," ",["disabled","var(--ch-2)"],["={","var(--ch-7)"],["isPending","var(--ch-4)"],["}","var(--ch-7)"]," ",["type","var(--ch-2)"],["=","var(--ch-7)"],["\"submit\"","var(--ch-8)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'button ml-2'","var(--ch-8)"],[">Send</","var(--ch-4)"],["button","var(--ch-6)"],[">","var(--ch-4)"],"\n      ",["</","var(--ch-4)"],["form","var(--ch-6)"],[">","var(--ch-4)"],"\n\n      ",["{","var(--ch-7)"],["optimisticMessages.","var(--ch-4)"],["map","var(--ch-5)"],["((","var(--ch-4)"],["message","var(--ch-3)"],[")","var(--ch-4)"]," ",["=>","var(--ch-7)"]," ",["(","var(--ch-4)"],"\n        ",["<","var(--ch-4)"],["div","var(--ch-6)"]," ",["key","var(--ch-2)"],["={","var(--ch-7)"],["message.id","var(--ch-4)"],["}","var(--ch-7)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'indent-1 text-slate-600 mt-1 hover:bg-slate-100 p-2 cursor-pointer rounded'","var(--ch-8)"],[">","var(--ch-4)"],"\n          ",["{","var(--ch-7)"],["message.value","var(--ch-4)"],["} {!!","var(--ch-7)"],["message.sending","var(--ch-4)"]," ",["&&","var(--ch-7)"]," ",["<","var(--ch-4)"],["small","var(--ch-6)"],["> (Sending...)</","var(--ch-4)"],["small","var(--ch-6)"],[">","var(--ch-4)"],["}","var(--ch-7)"],"\n        ",["</","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n      ",["))","var(--ch-4)"],["}","var(--ch-7)"],"\n    ",["</>","var(--ch-4)"],"\n  ",[");","var(--ch-4)"],"\n",["}","var(--ch-4)"]],"annotations":[],"themeName":"github-from-css","style":{"color":"var(--ch-4)","background":"var(--ch-16)","colorScheme":"var(--ch-0)"}},{"meta":"reducer.ts -c","value":"export interface Message {\n  value: string,\n  id: string,\n  sending?: boolean\n}\n\nexport function reducer(state: Message[], newMessage: Message) {\n  let newItem = {\n    ...newMessage,\n    sending: true\n  }\n  return [...state, newItem]\n}","lang":"jsx","code":"export interface Message {\n  value: string,\n  id: string,\n  sending?: boolean\n}\n\nexport function reducer(state: Message[], newMessage: Message) {\n  let newItem = {\n    ...newMessage,\n    sending: true\n  }\n  return [...state, newItem]\n}","tokens":[["export interface","var(--ch-7)"]," ",["Message","var(--ch-3)"]," ",["{","var(--ch-4)"],"\n  ",["value","var(--ch-3)"],[":","var(--ch-7)"]," ",["string","var(--ch-2)"],[",","var(--ch-4)"],"\n  ",["id","var(--ch-3)"],[":","var(--ch-7)"]," ",["string","var(--ch-2)"],[",","var(--ch-4)"],"\n  ",["sending","var(--ch-3)"],["?:","var(--ch-7)"]," ",["boolean","var(--ch-2)"],"\n",["}","var(--ch-4)"],"\n\n",["export function","var(--ch-7)"]," ",["reducer","var(--ch-5)"],["(","var(--ch-4)"],["state","var(--ch-3)"],[":","var(--ch-7)"]," ",["Message","var(--ch-3)"],["[],","var(--ch-4)"]," ",["newMessage","var(--ch-3)"],[":","var(--ch-7)"]," ",["Message","var(--ch-3)"],[") {","var(--ch-4)"],"\n  ",["let","var(--ch-7)"]," ",["newItem","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["{","var(--ch-4)"],"\n    ",["...","var(--ch-7)"],["newMessage,","var(--ch-4)"],"\n    ",["sending:","var(--ch-4)"]," ",["true","var(--ch-2)"],"\n  ",["}","var(--ch-4)"],"\n  ",["return","var(--ch-7)"]," ",["[","var(--ch-4)"],["...","var(--ch-7)"],["state, newItem]","var(--ch-4)"],"\n",["}","var(--ch-4)"]],"annotations":[],"themeName":"github-from-css","style":{"color":"var(--ch-4)","background":"var(--ch-16)","colorScheme":"var(--ch-0)"}},{"meta":"api.ts -c","value":"import { uuid } from '@/utils';\n\nvar requestOptions: RequestInit = {\n  method: 'GET',\n  redirect: 'follow'\n};\n\nconst url = 'https://randomuser.me/api/?results=2&inc=name,gender,email,nat,picture&noinfo'\n\nexport async function getMessage(msg: string) {\n  await fetch(url, requestOptions)\n  return { value: msg, id: uuid()}\n}","lang":"jsx","code":"import { uuid } from '@/utils';\n\nvar requestOptions: RequestInit = {\n  method: 'GET',\n  redirect: 'follow'\n};\n\nconst url = 'https://randomuser.me/api/?results=2&inc=name,gender,email,nat,picture&noinfo'\n\nexport async function getMessage(msg: string) {\n  await fetch(url, requestOptions)\n  return { value: msg, id: uuid()}\n}","tokens":[["import","var(--ch-7)"]," ",["{ uuid }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'@/utils'","var(--ch-8)"],[";","var(--ch-4)"],"\n\n",["var","var(--ch-7)"]," ",["requestOptions","var(--ch-4)"],[":","var(--ch-7)"]," ",["RequestInit","var(--ch-3)"]," ",["=","var(--ch-7)"]," ",["{","var(--ch-4)"],"\n  ",["method:","var(--ch-4)"]," ",["'GET'","var(--ch-8)"],[",","var(--ch-4)"],"\n  ",["redirect:","var(--ch-4)"]," ",["'follow'","var(--ch-8)"],"\n",["};","var(--ch-4)"],"\n\n",["const","var(--ch-7)"]," ",["url","var(--ch-2)"]," ",["=","var(--ch-7)"]," ",["'https://randomuser.me/api/?results=2&inc=name,gender,email,nat,picture&noinfo'","var(--ch-8)"],"\n\n",["export async function","var(--ch-7)"]," ",["getMessage","var(--ch-5)"],["(","var(--ch-4)"],["msg","var(--ch-3)"],[":","var(--ch-7)"]," ",["string","var(--ch-2)"],[") {","var(--ch-4)"],"\n  ",["await","var(--ch-7)"]," ",["fetch","var(--ch-5)"],["(url, requestOptions)","var(--ch-4)"],"\n  ",["return","var(--ch-7)"]," ",["{ value: msg, id:","var(--ch-4)"]," ",["uuid","var(--ch-5)"],["()}","var(--ch-4)"],"\n",["}","var(--ch-4)"]],"annotations":[],"themeName":"github-from-css","style":{"color":"var(--ch-4)","background":"var(--ch-16)","colorScheme":"var(--ch-0)"}}]}]]}]}]
1d:T538,import { useOptimistic, useState, useRef, useTransition } from "react"
import { getMessage } from './api'
import { reducer, Message } from './reducer'
import { uuid } from '@/utils';

export default function Index() {
  const [messages, setMessages] = useState<Message[]>([]);
  const [optimisticMessages, addOptimisticMessage] = useOptimistic(messages, reducer);
  const [isPending, startTransition] = useTransition()

  const form = useRef<any>(null);

  function formAction(formData: FormData) {
    let newMessage = formData.get("message") as string
    form.current.reset();

    startTransition(async () => {
      addOptimisticMessage({ value: newMessage, id: uuid() });
      let msg = await getMessage(newMessage);
      setMessages([...messages, msg])
    })
  }

  return (
    <>
      <form action={formAction} ref={form} className='flex'>
        <input disabled={isPending} type="text" name="message" placeholder="enter your message" />
        <button disabled={isPending} type="submit" className='button ml-2'>Send</button>
      </form>

      {optimisticMessages.map((message) => (
        <div key={message.id} className='indent-1 text-slate-600 mt-1 hover:bg-slate-100 p-2 cursor-pointer rounded'>
          {message.value} {!!message.sending && <small> (Sending...)</small>}
        </div>
      ))}
    </>
  );
}1e:T538,import { useOptimistic, useState, useRef, useTransition } from "react"
import { getMessage } from './api'
import { reducer, Message } from './reducer'
import { uuid } from '@/utils';

export default function Index() {
  const [messages, setMessages] = useState<Message[]>([]);
  const [optimisticMessages, addOptimisticMessage] = useOptimistic(messages, reducer);
  const [isPending, startTransition] = useTransition()

  const form = useRef<any>(null);

  function formAction(formData: FormData) {
    let newMessage = formData.get("message") as string
    form.current.reset();

    startTransition(async () => {
      addOptimisticMessage({ value: newMessage, id: uuid() });
      let msg = await getMessage(newMessage);
      setMessages([...messages, msg])
    })
  }

  return (
    <>
      <form action={formAction} ref={form} className='flex'>
        <input disabled={isPending} type="text" name="message" placeholder="enter your message" />
        <button disabled={isPending} type="submit" className='button ml-2'>Send</button>
      </form>

      {optimisticMessages.map((message) => (
        <div key={message.id} className='indent-1 text-slate-600 mt-1 hover:bg-slate-100 p-2 cursor-pointer rounded'>
          {message.value} {!!message.sending && <small> (Sending...)</small>}
        </div>
      ))}
    </>
  );
}1f:T538,import { useOptimistic, useState, useRef, useTransition } from "react"
import { getMessage } from './api'
import { reducer, Message } from './reducer'
import { uuid } from '@/utils';

export default function Index() {
  const [messages, setMessages] = useState<Message[]>([]);
  const [optimisticMessages, addOptimisticMessage] = useOptimistic(messages, reducer);
  const [isPending, startTransition] = useTransition()

  const form = useRef<any>(null);

  function formAction(formData: FormData) {
    let newMessage = formData.get("message") as string
    form.current.reset();

    startTransition(async () => {
      addOptimisticMessage({ value: newMessage, id: uuid() });
      let msg = await getMessage(newMessage);
      setMessages([...messages, msg])
    })
  }

  return (
    <>
      <form action={formAction} ref={form} className='flex'>
        <input disabled={isPending} type="text" name="message" placeholder="enter your message" />
        <button disabled={isPending} type="submit" className='button ml-2'>Send</button>
      </form>

      {optimisticMessages.map((message) => (
        <div key={message.id} className='indent-1 text-slate-600 mt-1 hover:bg-slate-100 p-2 cursor-pointer rounded'>
          {message.value} {!!message.sending && <small> (Sending...)</small>}
        </div>
      ))}
    </>
  );
}f:["$","div",null,{"className":"code-tabs border rounded border-gray-200 overflow-hidden my-5","children":["$","$L17",null,{"children":[["$","$L18",null,{"tabs":[{"meta":"index.tsx -c","value":"$1d","lang":"jsx"},{"meta":"reducer.ts -c","value":"export interface Message {\n  value: string,\n  id: string,\n  sending?: boolean\n}\n\nexport function reducer(state: Message[], newMessage: Message) {\n  let newItem = {\n    ...newMessage,\n    sending: true\n  }\n  return [...state, newItem]\n}","lang":"jsx"},{"meta":"api.ts -c","value":"import { uuid } from '@/utils';\n\nvar requestOptions: RequestInit = {\n  method: 'GET',\n  redirect: 'follow'\n};\n\nconst url = 'https://randomuser.me/api/?results=2&inc=name,gender,email,nat,picture&noinfo'\n\nexport async function getMessage(msg: string) {\n  await fetch(url, requestOptions)\n  return { value: msg, id: uuid()}\n}","lang":"jsx"}]}],["$","$L1a",null,{"highlighteds":[{"meta":"index.tsx -c","value":"$1e","lang":"jsx","code":"$1f","tokens":[["import","var(--ch-7)"]," ",["{ useOptimistic, useState, useRef, useTransition }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["\"react\"","var(--ch-8)"],"\n",["import","var(--ch-7)"]," ",["{ getMessage }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'./api'","var(--ch-8)"],"\n",["import","var(--ch-7)"]," ",["{ reducer, Message }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'./reducer'","var(--ch-8)"],"\n",["import","var(--ch-7)"]," ",["{ uuid }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'@/utils'","var(--ch-8)"],[";","var(--ch-4)"],"\n\n",["export default function","var(--ch-7)"]," ",["Index","var(--ch-5)"],["()","var(--ch-3)"]," ",["{","var(--ch-4)"],"\n  ",["const","var(--ch-7)"]," ",["[","var(--ch-4)"],["messages","var(--ch-2)"],[",","var(--ch-4)"]," ",["setMessages","var(--ch-2)"],["]","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["useState","var(--ch-5)"],["<","var(--ch-4)"],["Message","var(--ch-3)"],["[]>([]);","var(--ch-4)"],"\n  ",["const","var(--ch-7)"]," ",["[","var(--ch-4)"],["optimisticMessages","var(--ch-2)"],[",","var(--ch-4)"]," ",["addOptimisticMessage","var(--ch-2)"],["]","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["useOptimistic","var(--ch-5)"],["(messages, reducer);","var(--ch-4)"],"\n  ",["const","var(--ch-7)"]," ",["[","var(--ch-4)"],["isPending","var(--ch-2)"],[",","var(--ch-4)"]," ",["startTransition","var(--ch-2)"],["]","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["useTransition","var(--ch-5)"],["()","var(--ch-4)"],"\n\n  ",["const","var(--ch-7)"]," ",["form","var(--ch-2)"]," ",["=","var(--ch-7)"]," ",["useRef","var(--ch-5)"],["<","var(--ch-4)"],["any","var(--ch-2)"],[">(","var(--ch-4)"],["null","var(--ch-2)"],[");","var(--ch-4)"],"\n\n  ",["function","var(--ch-7)"]," ",["formAction","var(--ch-5)"],["(","var(--ch-4)"],["formData","var(--ch-3)"],[":","var(--ch-7)"]," ",["FormData","var(--ch-3)"],[") {","var(--ch-4)"],"\n    ",["let","var(--ch-7)"]," ",["newMessage","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["formData.","var(--ch-4)"],["get","var(--ch-5)"],["(","var(--ch-4)"],["\"message\"","var(--ch-8)"],[")","var(--ch-4)"]," ",["as","var(--ch-7)"]," ",["string","var(--ch-2)"],"\n    ",["form.current.","var(--ch-4)"],["reset","var(--ch-5)"],["();","var(--ch-4)"],"\n\n    ",["startTransition","var(--ch-5)"],["(","var(--ch-4)"],["async","var(--ch-7)"]," ",["()","var(--ch-4)"]," ",["=>","var(--ch-7)"]," ",["{","var(--ch-4)"],"\n      ",["addOptimisticMessage","var(--ch-5)"],["({ value: newMessage, id:","var(--ch-4)"]," ",["uuid","var(--ch-5)"],["() });","var(--ch-4)"],"\n      ",["let","var(--ch-7)"]," ",["msg","var(--ch-4)"]," ",["= await","var(--ch-7)"]," ",["getMessage","var(--ch-5)"],["(newMessage);","var(--ch-4)"],"\n      ",["setMessages","var(--ch-5)"],["([","var(--ch-4)"],["...","var(--ch-7)"],["messages, msg])","var(--ch-4)"],"\n    ",["})","var(--ch-4)"],"\n  ",["}","var(--ch-4)"],"\n\n  ",["return","var(--ch-7)"]," ",["(","var(--ch-4)"],"\n    ",["<>","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["form","var(--ch-6)"]," ",["action","var(--ch-2)"],["={","var(--ch-7)"],["formAction","var(--ch-4)"],["}","var(--ch-7)"]," ",["ref","var(--ch-2)"],["={","var(--ch-7)"],["form","var(--ch-4)"],["}","var(--ch-7)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'flex'","var(--ch-8)"],[">","var(--ch-4)"],"\n        ",["<","var(--ch-4)"],["input","var(--ch-6)"]," ",["disabled","var(--ch-2)"],["={","var(--ch-7)"],["isPending","var(--ch-4)"],["}","var(--ch-7)"]," ",["type","var(--ch-2)"],["=","var(--ch-7)"],["\"text\"","var(--ch-8)"]," ",["name","var(--ch-2)"],["=","var(--ch-7)"],["\"message\"","var(--ch-8)"]," ",["placeholder","var(--ch-2)"],["=","var(--ch-7)"],["\"enter your message\"","var(--ch-8)"]," ",["/>","var(--ch-4)"],"\n        ",["<","var(--ch-4)"],["button","var(--ch-6)"]," ",["disabled","var(--ch-2)"],["={","var(--ch-7)"],["isPending","var(--ch-4)"],["}","var(--ch-7)"]," ",["type","var(--ch-2)"],["=","var(--ch-7)"],["\"submit\"","var(--ch-8)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'button ml-2'","var(--ch-8)"],[">Send</","var(--ch-4)"],["button","var(--ch-6)"],[">","var(--ch-4)"],"\n      ",["</","var(--ch-4)"],["form","var(--ch-6)"],[">","var(--ch-4)"],"\n\n      ",["{","var(--ch-7)"],["optimisticMessages.","var(--ch-4)"],["map","var(--ch-5)"],["((","var(--ch-4)"],["message","var(--ch-3)"],[")","var(--ch-4)"]," ",["=>","var(--ch-7)"]," ",["(","var(--ch-4)"],"\n        ",["<","var(--ch-4)"],["div","var(--ch-6)"]," ",["key","var(--ch-2)"],["={","var(--ch-7)"],["message.id","var(--ch-4)"],["}","var(--ch-7)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'indent-1 text-slate-600 mt-1 hover:bg-slate-100 p-2 cursor-pointer rounded'","var(--ch-8)"],[">","var(--ch-4)"],"\n          ",["{","var(--ch-7)"],["message.value","var(--ch-4)"],["} {!!","var(--ch-7)"],["message.sending","var(--ch-4)"]," ",["&&","var(--ch-7)"]," ",["<","var(--ch-4)"],["small","var(--ch-6)"],["> (Sending...)</","var(--ch-4)"],["small","var(--ch-6)"],[">","var(--ch-4)"],["}","var(--ch-7)"],"\n        ",["</","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n      ",["))","var(--ch-4)"],["}","var(--ch-7)"],"\n    ",["</>","var(--ch-4)"],"\n  ",[");","var(--ch-4)"],"\n",["}","var(--ch-4)"]],"annotations":[],"themeName":"github-from-css","style":{"color":"var(--ch-4)","background":"var(--ch-16)","colorScheme":"var(--ch-0)"}},{"meta":"reducer.ts -c","value":"export interface Message {\n  value: string,\n  id: string,\n  sending?: boolean\n}\n\nexport function reducer(state: Message[], newMessage: Message) {\n  let newItem = {\n    ...newMessage,\n    sending: true\n  }\n  return [...state, newItem]\n}","lang":"jsx","code":"export interface Message {\n  value: string,\n  id: string,\n  sending?: boolean\n}\n\nexport function reducer(state: Message[], newMessage: Message) {\n  let newItem = {\n    ...newMessage,\n    sending: true\n  }\n  return [...state, newItem]\n}","tokens":[["export interface","var(--ch-7)"]," ",["Message","var(--ch-3)"]," ",["{","var(--ch-4)"],"\n  ",["value","var(--ch-3)"],[":","var(--ch-7)"]," ",["string","var(--ch-2)"],[",","var(--ch-4)"],"\n  ",["id","var(--ch-3)"],[":","var(--ch-7)"]," ",["string","var(--ch-2)"],[",","var(--ch-4)"],"\n  ",["sending","var(--ch-3)"],["?:","var(--ch-7)"]," ",["boolean","var(--ch-2)"],"\n",["}","var(--ch-4)"],"\n\n",["export function","var(--ch-7)"]," ",["reducer","var(--ch-5)"],["(","var(--ch-4)"],["state","var(--ch-3)"],[":","var(--ch-7)"]," ",["Message","var(--ch-3)"],["[],","var(--ch-4)"]," ",["newMessage","var(--ch-3)"],[":","var(--ch-7)"]," ",["Message","var(--ch-3)"],[") {","var(--ch-4)"],"\n  ",["let","var(--ch-7)"]," ",["newItem","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["{","var(--ch-4)"],"\n    ",["...","var(--ch-7)"],["newMessage,","var(--ch-4)"],"\n    ",["sending:","var(--ch-4)"]," ",["true","var(--ch-2)"],"\n  ",["}","var(--ch-4)"],"\n  ",["return","var(--ch-7)"]," ",["[","var(--ch-4)"],["...","var(--ch-7)"],["state, newItem]","var(--ch-4)"],"\n",["}","var(--ch-4)"]],"annotations":[],"themeName":"github-from-css","style":{"color":"var(--ch-4)","background":"var(--ch-16)","colorScheme":"var(--ch-0)"}},{"meta":"api.ts -c","value":"import { uuid } from '@/utils';\n\nvar requestOptions: RequestInit = {\n  method: 'GET',\n  redirect: 'follow'\n};\n\nconst url = 'https://randomuser.me/api/?results=2&inc=name,gender,email,nat,picture&noinfo'\n\nexport async function getMessage(msg: string) {\n  await fetch(url, requestOptions)\n  return { value: msg, id: uuid()}\n}","lang":"jsx","code":"import { uuid } from '@/utils';\n\nvar requestOptions: RequestInit = {\n  method: 'GET',\n  redirect: 'follow'\n};\n\nconst url = 'https://randomuser.me/api/?results=2&inc=name,gender,email,nat,picture&noinfo'\n\nexport async function getMessage(msg: string) {\n  await fetch(url, requestOptions)\n  return { value: msg, id: uuid()}\n}","tokens":[["import","var(--ch-7)"]," ",["{ uuid }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'@/utils'","var(--ch-8)"],[";","var(--ch-4)"],"\n\n",["var","var(--ch-7)"]," ",["requestOptions","var(--ch-4)"],[":","var(--ch-7)"]," ",["RequestInit","var(--ch-3)"]," ",["=","var(--ch-7)"]," ",["{","var(--ch-4)"],"\n  ",["method:","var(--ch-4)"]," ",["'GET'","var(--ch-8)"],[",","var(--ch-4)"],"\n  ",["redirect:","var(--ch-4)"]," ",["'follow'","var(--ch-8)"],"\n",["};","var(--ch-4)"],"\n\n",["const","var(--ch-7)"]," ",["url","var(--ch-2)"]," ",["=","var(--ch-7)"]," ",["'https://randomuser.me/api/?results=2&inc=name,gender,email,nat,picture&noinfo'","var(--ch-8)"],"\n\n",["export async function","var(--ch-7)"]," ",["getMessage","var(--ch-5)"],["(","var(--ch-4)"],["msg","var(--ch-3)"],[":","var(--ch-7)"]," ",["string","var(--ch-2)"],[") {","var(--ch-4)"],"\n  ",["await","var(--ch-7)"]," ",["fetch","var(--ch-5)"],["(url, requestOptions)","var(--ch-4)"],"\n  ",["return","var(--ch-7)"]," ",["{ value: msg, id:","var(--ch-4)"]," ",["uuid","var(--ch-5)"],["()}","var(--ch-4)"],"\n",["}","var(--ch-4)"]],"annotations":[],"themeName":"github-from-css","style":{"color":"var(--ch-4)","background":"var(--ch-16)","colorScheme":"var(--ch-0)"}}]}]]}]}]
e:["$","div",null,{"className":"code-wrapper border my-4 border-gray-200 rounded overflow-hidden","children":[null,["$","div",null,{"className":"code-base html","children":[false,["$","pre",null,{"data-theme":"github-from-css","data-lang":"html","ref":"$undefined","data-ch":true,"children":["$","div",null,{"style":{"minWidth":"fit-content"},"children":[["$","div","1,1",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[1,["$","span",null,{"className":"invisible","children":""}]]}]}],["$","div",null,{"children":[["$","span","0",{"style":{"color":"var(--ch-4)"},"children":"<"}],["$","span","1",{"style":{"color":"var(--ch-6)"},"children":"form"}]," ",["$","span","3",{"style":{"color":"var(--ch-2)"},"children":"action"}],["$","span","4",{"style":{"color":"var(--ch-4)"},"children":"="}],["$","span","5",{"style":{"color":"var(--ch-8)"},"children":"{formAction}"}]," ",["$","span","7",{"style":{"color":"var(--ch-2)"},"children":"ref"}],["$","span","8",{"style":{"color":"var(--ch-4)"},"children":"="}],["$","span","9",{"style":{"color":"var(--ch-8)"},"children":"{form}"}]," ",["$","span","11",{"style":{"color":"var(--ch-2)"},"children":"className"}],["$","span","12",{"style":{"color":"var(--ch-4)"},"children":"="}],["$","span","13",{"style":{"color":"var(--ch-8)"},"children":"'flex'"}],["$","span","14",{"style":{"color":"var(--ch-4)"},"children":">"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","2,2",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[2,["$","span",null,{"className":"invisible","children":""}]]}]}],["$","div",null,{"children":["  ",["$","span","1",{"style":{"color":"var(--ch-4)"},"children":"<"}],["$","span","2",{"style":{"color":"var(--ch-6)"},"children":"input"}]," ",["$","span","4",{"style":{"color":"var(--ch-2)"},"children":"disabled"}],["$","span","5",{"style":{"color":"var(--ch-4)"},"children":"="}],["$","span","6",{"style":{"color":"var(--ch-8)"},"children":"{isPending}"}]," ",["$","span","8",{"style":{"color":"var(--ch-2)"},"children":"type"}],["$","span","9",{"style":{"color":"var(--ch-4)"},"children":"="}],["$","span","10",{"style":{"color":"var(--ch-8)"},"children":"\"text\""}]," ",["$","span","12",{"style":{"color":"var(--ch-2)"},"children":"name"}],["$","span","13",{"style":{"color":"var(--ch-4)"},"children":"="}],["$","span","14",{"style":{"color":"var(--ch-8)"},"children":"\"message\""}]," ",["$","span","16",{"style":{"color":"var(--ch-2)"},"children":"placeholder"}],["$","span","17",{"style":{"color":"var(--ch-4)"},"children":"="}],["$","span","18",{"style":{"color":"var(--ch-8)"},"children":"\"enter your message\""}]," ",["$","span","20",{"style":{"color":"var(--ch-4)"},"children":"/>"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","3,3",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[3,["$","span",null,{"className":"invisible","children":""}]]}]}],["$","div",null,{"children":["  ",["$","span","1",{"style":{"color":"var(--ch-4)"},"children":"<"}],["$","span","2",{"style":{"color":"var(--ch-6)"},"children":"button"}]," ",["$","span","4",{"style":{"color":"var(--ch-2)"},"children":"disabled"}],["$","span","5",{"style":{"color":"var(--ch-4)"},"children":"="}],["$","span","6",{"style":{"color":"var(--ch-8)"},"children":"{isPending}"}]," ",["$","span","8",{"style":{"color":"var(--ch-2)"},"children":"type"}],["$","span","9",{"style":{"color":"var(--ch-4)"},"children":"="}],["$","span","10",{"style":{"color":"var(--ch-8)"},"children":"\"submit\""}]," ",["$","span","12",{"style":{"color":"var(--ch-2)"},"children":"className"}],["$","span","13",{"style":{"color":"var(--ch-4)"},"children":"="}],["$","span","14",{"style":{"color":"var(--ch-8)"},"children":"'ml-2'"}],["$","span","15",{"style":{"color":"var(--ch-4)"},"children":">Send</"}],["$","span","16",{"style":{"color":"var(--ch-6)"},"children":"button"}],["$","span","17",{"style":{"color":"var(--ch-4)"},"children":">"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","4,4",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[4,["$","span",null,{"className":"invisible","children":""}]]}]}],["$","div",null,{"children":[["$","span","0",{"style":{"color":"var(--ch-4)"},"children":"</"}],["$","span","1",{"style":{"color":"var(--ch-6)"},"children":"form"}],["$","span","2",{"style":{"color":"var(--ch-4)"},"children":">"}]],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}]]}]}]]}]]}]
15:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
13:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"usehook - 前端顶级精英俱乐部"}],["$","meta","2",{"name":"description","content":"最好的前端学习网站, react, react19, react hooks, zustand"}],["$","meta","3",{"name":"author","content":"这波能反杀"}],["$","meta","4",{"name":"keywords","content":"react, react19, react hooks, zustand"}],["$","link","5",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}]]
11:null
