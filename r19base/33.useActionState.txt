1:"$Sreact.fragment"
2:I[51790,["7525","static/chunks/7525-411280bffc37a107.js","8173","static/chunks/8173-1aab990e083a60ce.js","5926","static/chunks/5926-2f921190ce1e6581.js","3974","static/chunks/3974-a1a1a9aca3315bf5.js","7177","static/chunks/app/layout-42df43a67d50e5c7.js"],"default"]
3:I[73974,["7525","static/chunks/7525-411280bffc37a107.js","8173","static/chunks/8173-1aab990e083a60ce.js","5926","static/chunks/5926-2f921190ce1e6581.js","3974","static/chunks/3974-a1a1a9aca3315bf5.js","7177","static/chunks/app/layout-42df43a67d50e5c7.js"],"default"]
4:I[15244,[],""]
5:I[43866,[],""]
6:I[14547,[],"ClientSegmentRoot"]
7:I[34489,["7525","static/chunks/7525-411280bffc37a107.js","8173","static/chunks/8173-1aab990e083a60ce.js","5926","static/chunks/5926-2f921190ce1e6581.js","3974","static/chunks/3974-a1a1a9aca3315bf5.js","8083","static/chunks/app/r19base/layout-2cc320d5b72f6d0a.js"],"default"]
9:I[98087,["8150","static/chunks/7cfd557f-0718c923d48595ad.js","7525","static/chunks/7525-411280bffc37a107.js","4320","static/chunks/4320-eb0b4108191194bc.js","8173","static/chunks/8173-1aab990e083a60ce.js","3152","static/chunks/3152-e813ba8dd61cd947.js","8993","static/chunks/8993-6412cbf42ee52bf5.js","5205","static/chunks/app/r19base/(5.formaction)/33.useActionState/layout-92e6d31725f00f59.js"],"default"]
a:I[27711,["7525","static/chunks/7525-411280bffc37a107.js","4320","static/chunks/4320-eb0b4108191194bc.js","5926","static/chunks/5926-2f921190ce1e6581.js","2794","static/chunks/2794-e7741df2722cee1f.js","4858","static/chunks/app/r19base/(5.formaction)/33.useActionState/page-4eba4727f8f0d184.js"],"default"]
c:I[75408,["7525","static/chunks/7525-411280bffc37a107.js","4320","static/chunks/4320-eb0b4108191194bc.js","5926","static/chunks/5926-2f921190ce1e6581.js","2794","static/chunks/2794-e7741df2722cee1f.js","4858","static/chunks/app/r19base/(5.formaction)/33.useActionState/page-4eba4727f8f0d184.js"],"default"]
f:I[86213,[],"OutletBoundary"]
11:I[86213,[],"MetadataBoundary"]
13:I[86213,[],"ViewportBoundary"]
15:I[34835,[],""]
:HL["/_next/static/media/569ce4b8f30dc480-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/d498c84e4ab246b3.css","style"]
:HL["/_next/static/css/894ed73796737685.css","style"]
:HL["/_next/static/css/738174a5e4c964fb.css","style"]
:HL["/_next/static/css/17904d092d77f54f.css","style"]
:HL["/_next/static/css/9f294032a6ebc240.css","style"]
0:{"P":null,"b":"8NHiCZJp1GrYIFaHBSRIc","p":"","c":["","r19base","33.useActionState"],"i":false,"f":[[["",{"children":["r19base",{"children":["(5.formaction)",{"children":["33.useActionState",{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/d498c84e4ab246b3.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/894ed73796737685.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/738174a5e4c964fb.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","3",{"rel":"stylesheet","href":"/_next/static/css/17904d092d77f54f.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"zh","suppressHydrationWarning":true,"children":[["$","head",null,{"children":[["$","meta",null,{"charSet":"UTF-8"}],["$","link",null,{"href":"https://framerusercontent.com/images/YRd2KCq4G2aXNg15aHvl7AtcGQ.png","rel":"icon","media":"(prefers-color-scheme: light)"}],["$","link",null,{"rel":"stylesheet","href":"https://rsms.me/inter/inter.css"}],["$","link",null,{"rel":"stylesheet","href":"https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css","integrity":"sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV","crossOrigin":"anonymous"}],["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1.0 maximum-scale=1, user-scalable=no"}],["$","meta",null,{"name":"mobile-web-app-capable","content":"yes"}],["$","meta",null,{"name":"apple-mobile-web-app-status-bar-style","content":"black-translucent"}]]}],["$","body",null,{"className":"__variable_4d318d __variable_ea5f4b antialiased","children":["$","$L2",null,{"children":[["$","$L3",null,{}],["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[],[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]]}]}]]}]]}],{"children":["r19base",["$","$1","c",{"children":[null,["$","$L6",null,{"Component":"$7","slots":{"children":["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","r19base","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]},"params":{},"promise":"$@8"}]]}],{"children":["(5.formaction)",["$","$1","c",{"children":[null,["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","r19base","children","(5.formaction)","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["33.useActionState",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/9f294032a6ebc240.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L9",null,{"children":["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","r19base","children","(5.formaction)","children","33.useActionState","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]}]]}],{"children":["__PAGE__",["$","$1","c",{"children":[[["$","$La",null,{}],"\n",["$","h3",null,{"id":"1useactionstate","children":["1、",["$","strong",null,{"children":"useActionState"}]]}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"useActionState"}]," 与 useState 的使用基本上是一致的。它同样可以用来定义一个",["$","strong",null,{"children":"状态"}],"。他和 useState 不一样的是，",["$","code",null,{"children":"useActionState"}]," 需要结合 form action 使用，它的更新机制依赖于 action。"]}],"\n",["$","p",null,{"children":"useActionState 接收两个参数，第一个参数是一个回调函数，用于获取 action 传递过来的值。第二个参数表示定义状态的初始值。"}],"\n",["$","p",null,{"children":"回调函数中，也接收两个参数，第一个参数表示当前状态值。第二参数表示表单 action 提交传递过来的 FormData 值。"}],"\n",["$","p",null,{"children":"简单的代码如下"}],"\n",["$","$La",null,{}],"\n","$Lb","\n",["$","p",null,{"children":["这里需要特别注意的是，我们可以轻松将 useActionAtate 的更新方法 ",["$","code",null,{"children":"increment"}]," 放到函数之外去。这里的一个好处是更利于与其他组件或者 server 进行交互。在解耦上非常有用。"]}],"\n",["$","h3",null,{"id":"2复杂案例","children":["2、",["$","strong",null,{"children":"复杂案例"}]]}],"\n",["$","p",null,{"children":"大家先来看一下演示效果。然后再根据代码学习，这是一个比较复杂的案例。"}],"\n",["$","$Lc",null,{}],"\n","$Ld","\n",["$","p",null,{"children":["在 next.js 中使用时，我们可以把 action 单独执行服务端的逻辑，从而轻松做到客户端组件与服务端组件的交互。上面案例中的 ",["$","code",null,{"children":"actions.ts"}]," 则表示服务端的代码"]}],"\n","$Le"],null,["$","$Lf",null,{"children":"$L10"}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","RhuFJvaXo7Yen4cV_2UbU",{"children":[["$","$L11",null,{"children":"$L12"}],["$","$L13",null,{"children":"$L14"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}]]}],false]],"m":"$undefined","G":["$15","$undefined"],"s":false,"S":true}
8:{}
16:I[86531,["7525","static/chunks/7525-411280bffc37a107.js","4320","static/chunks/4320-eb0b4108191194bc.js","5926","static/chunks/5926-2f921190ce1e6581.js","2794","static/chunks/2794-e7741df2722cee1f.js","4858","static/chunks/app/r19base/(5.formaction)/33.useActionState/page-4eba4727f8f0d184.js"],"CopyButton"]
17:I[34034,["7525","static/chunks/7525-411280bffc37a107.js","4320","static/chunks/4320-eb0b4108191194bc.js","5926","static/chunks/5926-2f921190ce1e6581.js","2794","static/chunks/2794-e7741df2722cee1f.js","4858","static/chunks/app/r19base/(5.formaction)/33.useActionState/page-4eba4727f8f0d184.js"],"default"]
18:I[65470,["7525","static/chunks/7525-411280bffc37a107.js","4320","static/chunks/4320-eb0b4108191194bc.js","5926","static/chunks/5926-2f921190ce1e6581.js","2794","static/chunks/2794-e7741df2722cee1f.js","4858","static/chunks/app/r19base/(5.formaction)/33.useActionState/page-4eba4727f8f0d184.js"],"CodeTabHeader"]
19:I[65703,["7525","static/chunks/7525-411280bffc37a107.js","4320","static/chunks/4320-eb0b4108191194bc.js","5926","static/chunks/5926-2f921190ce1e6581.js","2794","static/chunks/2794-e7741df2722cee1f.js","4858","static/chunks/app/r19base/(5.formaction)/33.useActionState/page-4eba4727f8f0d184.js"],"CodeTabsInner"]
e:["$","div",null,{"className":"code-wrapper border my-4 border-gray-200 rounded overflow-hidden","children":[["$","div",null,{"className":"code-header px-2 py-2 text-sm border-b border-gray-200 bg-gray-50","children":["$","div",null,{"className":"flex items-center gap-1 relative z-10","children":[["$","span",null,{"dangerouslySetInnerHTML":{"__html":"<svg fill='#498ba7' height='20' viewBox=\"0 0 32 32\"><path d=\"M15.6 11.8h-3.4V22H9.7V11.8H6.3V10h9.2v1.8zm7.7 7.1c0-.5-.2-.8-.5-1.1-.3-.3-.9-.5-1.7-.8-1.4-.4-2.5-.9-3.3-1.5-.7-.6-1.1-1.3-1.1-2.3 0-1 .4-1.8 1.3-2.4.8-.6 1.9-.9 3.2-.9 1.3 0 2.4.4 3.2 1.1.8.7 1.2 1.6 1.2 2.6h-2.3c0-.6-.2-1-.6-1.4-.4-.3-.9-.5-1.6-.5-.6 0-1.1.1-1.5.4-.4.3-.5.7-.5 1.1 0 .4.2.7.6 1 .4.3 1 .5 2 .8 1.3.4 2.3.9 3 1.5.7.6 1 1.4 1 2.4s-.4 1.9-1.2 2.4c-.8.6-1.9.9-3.2.9-1.3 0-2.5-.3-3.4-1s-1.5-1.6-1.4-2.9h2.4c0 .7.2 1.2.7 1.6.4.3 1.1.5 1.8.5s1.2-.1 1.5-.4c.2-.3.4-.7.4-1.1z\"/></svg>"}}],["$","span",null,{"children":"actions.ts"}]]}]}],["$","div",null,{"className":"code-base javascript","children":[["$","$L16",null,{"text":"\"use server\";\n\nexport async function addToCart(prevState, queryData) {\n  const itemID = queryData.get('itemID');\n  if (itemID === \"1\") {\n    return {\n      success: true,\n      cartSize: 12,\n    };\n  } else {\n    return {\n      success: false,\n      message: \"The item is sold out.\",\n    };\n  }\n}"}],["$","pre",null,{"data-theme":"github-from-css","data-lang":"javascript","ref":"$undefined","data-ch":true,"children":["$","div",null,{"style":{"minWidth":"fit-content"},"children":[["$","div","1,1",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[1,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":[["$","span","0",{"style":{"color":"var(--ch-8)"},"children":"\"use server\""}],["$","span","1",{"style":{"color":"var(--ch-4)"},"children":";"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","2,2",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[2,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","3,3",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[3,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":[["$","span","0",{"style":{"color":"var(--ch-7)"},"children":"export async function"}]," ",["$","span","2",{"style":{"color":"var(--ch-5)"},"children":"addToCart"}],["$","span","3",{"style":{"color":"var(--ch-4)"},"children":"("}],["$","span","4",{"style":{"color":"var(--ch-3)"},"children":"prevState"}],["$","span","5",{"style":{"color":"var(--ch-4)"},"children":","}]," ",["$","span","7",{"style":{"color":"var(--ch-3)"},"children":"queryData"}],["$","span","8",{"style":{"color":"var(--ch-4)"},"children":") {"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","4,4",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[4,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["  ",["$","span","1",{"style":{"color":"var(--ch-7)"},"children":"const"}]," ",["$","span","3",{"style":{"color":"var(--ch-2)"},"children":"itemID"}]," ",["$","span","5",{"style":{"color":"var(--ch-7)"},"children":"="}]," ",["$","span","7",{"style":{"color":"var(--ch-4)"},"children":"queryData."}],["$","span","8",{"style":{"color":"var(--ch-5)"},"children":"get"}],["$","span","9",{"style":{"color":"var(--ch-4)"},"children":"("}],["$","span","10",{"style":{"color":"var(--ch-8)"},"children":"'itemID'"}],["$","span","11",{"style":{"color":"var(--ch-4)"},"children":");"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","5,5",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[5,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["  ",["$","span","1",{"style":{"color":"var(--ch-7)"},"children":"if"}]," ",["$","span","3",{"style":{"color":"var(--ch-4)"},"children":"(itemID"}]," ",["$","span","5",{"style":{"color":"var(--ch-7)"},"children":"==="}]," ",["$","span","7",{"style":{"color":"var(--ch-8)"},"children":"\"1\""}],["$","span","8",{"style":{"color":"var(--ch-4)"},"children":") {"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","6,6",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[6,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["    ",["$","span","1",{"style":{"color":"var(--ch-7)"},"children":"return"}]," ",["$","span","3",{"style":{"color":"var(--ch-4)"},"children":"{"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","7,7",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[7,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["      ",["$","span","1",{"style":{"color":"var(--ch-4)"},"children":"success:"}]," ",["$","span","3",{"style":{"color":"var(--ch-2)"},"children":"true"}],["$","span","4",{"style":{"color":"var(--ch-4)"},"children":","}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","8,8",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[8,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["      ",["$","span","1",{"style":{"color":"var(--ch-4)"},"children":"cartSize:"}]," ",["$","span","3",{"style":{"color":"var(--ch-2)"},"children":"12"}],["$","span","4",{"style":{"color":"var(--ch-4)"},"children":","}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","9,9",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[9,["$","span",null,{"className":"invisible","children":"0"}]]}]}],["$","div",null,{"children":["    ",["$","span","1",{"style":{"color":"var(--ch-4)"},"children":"};"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","10,10",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[10,["$","span",null,{"className":"invisible","children":""}]]}]}],["$","div",null,{"children":["  ",["$","span","1",{"style":{"color":"var(--ch-4)"},"children":"}"}]," ",["$","span","3",{"style":{"color":"var(--ch-7)"},"children":"else"}]," ",["$","span","5",{"style":{"color":"var(--ch-4)"},"children":"{"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","11,11",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[11,["$","span",null,{"className":"invisible","children":""}]]}]}],["$","div",null,{"children":["    ",["$","span","1",{"style":{"color":"var(--ch-7)"},"children":"return"}]," ",["$","span","3",{"style":{"color":"var(--ch-4)"},"children":"{"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","12,12",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[12,["$","span",null,{"className":"invisible","children":""}]]}]}],["$","div",null,{"children":["      ",["$","span","1",{"style":{"color":"var(--ch-4)"},"children":"success:"}]," ",["$","span","3",{"style":{"color":"var(--ch-2)"},"children":"false"}],["$","span","4",{"style":{"color":"var(--ch-4)"},"children":","}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","13,13",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[13,["$","span",null,{"className":"invisible","children":""}]]}]}],["$","div",null,{"children":["      ",["$","span","1",{"style":{"color":"var(--ch-4)"},"children":"message:"}]," ",["$","span","3",{"style":{"color":"var(--ch-8)"},"children":"\"The item is sold out.\""}],["$","span","4",{"style":{"color":"var(--ch-4)"},"children":","}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","14,14",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[14,["$","span",null,{"className":"invisible","children":""}]]}]}],["$","div",null,{"children":["    ",["$","span","1",{"style":{"color":"var(--ch-4)"},"children":"};"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","15,15",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[15,["$","span",null,{"className":"invisible","children":""}]]}]}],["$","div",null,{"children":["  ",["$","span","1",{"style":{"color":"var(--ch-4)"},"children":"}"}],"\n"],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}],["$","div","16,16",{"style":{"borderLeft":"solid 2px transparent","borderLeftColor":"$undefined","backgroundColor":"$undefined"},"className":"flex","children":["$","div",null,{"className":"flex items-center","children":[["$","span",null,{"className":"line-number px-4 text-gray-400 text-xs select-none","children":["$","span",null,{"children":[16,["$","span",null,{"className":"invisible","children":""}]]}]}],["$","div",null,{"children":[["$","span","0",{"style":{"color":"var(--ch-4)"},"children":"}"}]],"className":"px-2 flex-1 flex-1 pl-2"}]]}]}]]}]}]]}]]}]
d:["$","div",null,{"className":"code-tabs border rounded border-gray-200 overflow-hidden my-5","children":["$","$L17",null,{"children":[["$","$L18",null,{"tabs":[{"meta":"index.tsx -c","value":"import { useState } from 'react'\nimport BookItem, { Book } from './book-item'\nimport List from './list'\n\nexport default function Demo02() {\n  const [books, updateBooks] = useState<Book[]>([])\n\n  function addToCart(book: Book) {\n    const target = books.find(cart => cart.id === book.id)\n    if (target) {\n      target.count += 1\n      return updateBooks([...books])\n    }\n    updateBooks(books => [...books, book])\n  }\n\n  return (\n    <div>\n      <BookItem id='001' title='JavaScript Core advance' onSubmit={addToCart} />\n      <BookItem id='002' title='React19 all solution' onSubmit={addToCart} />\n      <List books={books} />\n    </div>\n  )\n}\n","lang":"tsx"},{"meta":"book-item.tsx -c","value":"import { useActionState } from 'react'\nimport { submit } from './actions'\nimport SubmitButton from './submit-button'\n\nexport interface Book {\n  id: string,\n  title: string,\n  count: number\n}\n\nfunction BookItem({ id, title, onSubmit }: {\n  id: string,\n  title: string,\n  onSubmit: (book: Book) => any\n}) {\n  const [count, formAction] = useActionState<number, FormData>(\n    (cur, formData) => submit(cur, formData, onSubmit), 0\n  )\n\n  return (\n    <form action={formAction} className='border border-gray-200 p-4 my-3 rounded'>\n      <h4 className='!my-2 font-bold text-lg'>book name: {title}</h4>\n      <input type=\"hidden\" name='title' value={title} />\n      <input type=\"hidden\" name='id' value={id} />\n      <div style={{ marginBottom: '20px' }}>cart count: {count}</div>\n      <SubmitButton>ADD TO CART</SubmitButton>\n    </form>\n  )\n}\n\nexport default BookItem;\n","lang":"tsx"},{"meta":"list.tsx -c","value":"import { Book } from './book-item'\n\nfunction CartList({ books = [] }: {\n  books: Book[]\n}) {\n  return (\n    <div>\n      {books.map((book, index) => (\n        <div key={`cart_${index}`} className='border border-yellow-400 p-4 rounded my-4'>\n          <div className='font-bold'>title: {book.title}</div>\n          <div>id: {book.id}</div>\n          <div>count: {book.count || 0}</div>\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default CartList","lang":"tsx"},{"meta":"actions.ts -c","value":"import { Book } from './book-item'\n\nexport async function submit(cur: number, formData: FormData, onSubmit: (book: Book) => any) {\n  const id = formData.get('id') as string\n  const title = formData.get('title') as string\n  await new Promise((resolve) => {\n    setTimeout(() => {\n      onSubmit({id, title, count: cur + 1})\n      resolve('')\n    }, 300)\n  })\n  return cur + 1\n}\n","lang":"tsx"},{"meta":"submit-button.tsx -c","value":"import { useFormStatus } from 'react-dom'\nimport Button from 'components/ui/button'\nimport { PropsWithChildren } from 'react'\n\nexport default function SubmitButton({ children }: PropsWithChildren) {\n  const { pending } = useFormStatus()\n  return (\n    <div className='text-right'>\n      <Button primary disabled={pending}>\n        {children} {pending ? '...' : ''}\n      </Button>\n    </div>\n  )\n}\n","lang":"tsx"}]}],["$","$L19",null,{"highlighteds":[{"meta":"index.tsx -c","value":"import { useState } from 'react'\nimport BookItem, { Book } from './book-item'\nimport List from './list'\n\nexport default function Demo02() {\n  const [books, updateBooks] = useState<Book[]>([])\n\n  function addToCart(book: Book) {\n    const target = books.find(cart => cart.id === book.id)\n    if (target) {\n      target.count += 1\n      return updateBooks([...books])\n    }\n    updateBooks(books => [...books, book])\n  }\n\n  return (\n    <div>\n      <BookItem id='001' title='JavaScript Core advance' onSubmit={addToCart} />\n      <BookItem id='002' title='React19 all solution' onSubmit={addToCart} />\n      <List books={books} />\n    </div>\n  )\n}\n","lang":"tsx","code":"import { useState } from 'react'\nimport BookItem, { Book } from './book-item'\nimport List from './list'\n\nexport default function Demo02() {\n  const [books, updateBooks] = useState<Book[]>([])\n\n  function addToCart(book: Book) {\n    const target = books.find(cart => cart.id === book.id)\n    if (target) {\n      target.count += 1\n      return updateBooks([...books])\n    }\n    updateBooks(books => [...books, book])\n  }\n\n  return (\n    <div>\n      <BookItem id='001' title='JavaScript Core advance' onSubmit={addToCart} />\n      <BookItem id='002' title='React19 all solution' onSubmit={addToCart} />\n      <List books={books} />\n    </div>\n  )\n}\n","tokens":[["import","var(--ch-7)"]," ",["{ useState }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'react'","var(--ch-8)"],"\n",["import","var(--ch-7)"]," ",["BookItem, { Book }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'./book-item'","var(--ch-8)"],"\n",["import","var(--ch-7)"]," ",["List","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'./list'","var(--ch-8)"],"\n\n",["export default function","var(--ch-7)"]," ",["Demo02","var(--ch-5)"],["()","var(--ch-3)"]," ",["{","var(--ch-4)"],"\n  ",["const","var(--ch-7)"]," ",["[","var(--ch-4)"],["books","var(--ch-2)"],[",","var(--ch-4)"]," ",["updateBooks","var(--ch-2)"],["]","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["useState","var(--ch-5)"],["<","var(--ch-4)"],["Book","var(--ch-3)"],["[]>([])","var(--ch-4)"],"\n\n  ",["function","var(--ch-7)"]," ",["addToCart","var(--ch-5)"],["(","var(--ch-4)"],["book","var(--ch-3)"],[":","var(--ch-7)"]," ",["Book","var(--ch-3)"],[") {","var(--ch-4)"],"\n    ",["const","var(--ch-7)"]," ",["target","var(--ch-2)"]," ",["=","var(--ch-7)"]," ",["books.","var(--ch-4)"],["find","var(--ch-5)"],["(","var(--ch-4)"],["cart","var(--ch-3)"]," ",["=>","var(--ch-7)"]," ",["cart.id","var(--ch-4)"]," ",["===","var(--ch-7)"]," ",["book.id)","var(--ch-4)"],"\n    ",["if","var(--ch-7)"]," ",["(target) {","var(--ch-4)"],"\n      ",["target.count","var(--ch-4)"]," ",["+=","var(--ch-7)"]," ",["1","var(--ch-2)"],"\n      ",["return","var(--ch-7)"]," ",["updateBooks","var(--ch-5)"],["([","var(--ch-4)"],["...","var(--ch-7)"],["books])","var(--ch-4)"],"\n    ",["}","var(--ch-4)"],"\n    ",["updateBooks","var(--ch-5)"],["(","var(--ch-4)"],["books","var(--ch-3)"]," ",["=>","var(--ch-7)"]," ",["[","var(--ch-4)"],["...","var(--ch-7)"],["books, book])","var(--ch-4)"],"\n  ",["}","var(--ch-4)"],"\n\n  ",["return","var(--ch-7)"]," ",["(","var(--ch-4)"],"\n    ",["<","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["BookItem","var(--ch-6)"]," ",["id","var(--ch-2)"],["=","var(--ch-7)"],["'001'","var(--ch-8)"]," ",["title","var(--ch-2)"],["=","var(--ch-7)"],["'JavaScript Core advance'","var(--ch-8)"]," ",["onSubmit","var(--ch-2)"],["={","var(--ch-7)"],["addToCart","var(--ch-4)"],["}","var(--ch-7)"]," ",["/>","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["BookItem","var(--ch-6)"]," ",["id","var(--ch-2)"],["=","var(--ch-7)"],["'002'","var(--ch-8)"]," ",["title","var(--ch-2)"],["=","var(--ch-7)"],["'React19 all solution'","var(--ch-8)"]," ",["onSubmit","var(--ch-2)"],["={","var(--ch-7)"],["addToCart","var(--ch-4)"],["}","var(--ch-7)"]," ",["/>","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["List","var(--ch-6)"]," ",["books","var(--ch-2)"],["={","var(--ch-7)"],["books","var(--ch-4)"],["}","var(--ch-7)"]," ",["/>","var(--ch-4)"],"\n    ",["</","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n  ",[")","var(--ch-4)"],"\n",["}","var(--ch-4)"],"\n"],"annotations":[],"themeName":"github-from-css","style":{"color":"var(--ch-4)","background":"var(--ch-16)","colorScheme":"var(--ch-0)"}},{"meta":"book-item.tsx -c","value":"import { useActionState } from 'react'\nimport { submit } from './actions'\nimport SubmitButton from './submit-button'\n\nexport interface Book {\n  id: string,\n  title: string,\n  count: number\n}\n\nfunction BookItem({ id, title, onSubmit }: {\n  id: string,\n  title: string,\n  onSubmit: (book: Book) => any\n}) {\n  const [count, formAction] = useActionState<number, FormData>(\n    (cur, formData) => submit(cur, formData, onSubmit), 0\n  )\n\n  return (\n    <form action={formAction} className='border border-gray-200 p-4 my-3 rounded'>\n      <h4 className='!my-2 font-bold text-lg'>book name: {title}</h4>\n      <input type=\"hidden\" name='title' value={title} />\n      <input type=\"hidden\" name='id' value={id} />\n      <div style={{ marginBottom: '20px' }}>cart count: {count}</div>\n      <SubmitButton>ADD TO CART</SubmitButton>\n    </form>\n  )\n}\n\nexport default BookItem;\n","lang":"tsx","code":"import { useActionState } from 'react'\nimport { submit } from './actions'\nimport SubmitButton from './submit-button'\n\nexport interface Book {\n  id: string,\n  title: string,\n  count: number\n}\n\nfunction BookItem({ id, title, onSubmit }: {\n  id: string,\n  title: string,\n  onSubmit: (book: Book) => any\n}) {\n  const [count, formAction] = useActionState<number, FormData>(\n    (cur, formData) => submit(cur, formData, onSubmit), 0\n  )\n\n  return (\n    <form action={formAction} className='border border-gray-200 p-4 my-3 rounded'>\n      <h4 className='!my-2 font-bold text-lg'>book name: {title}</h4>\n      <input type=\"hidden\" name='title' value={title} />\n      <input type=\"hidden\" name='id' value={id} />\n      <div style={{ marginBottom: '20px' }}>cart count: {count}</div>\n      <SubmitButton>ADD TO CART</SubmitButton>\n    </form>\n  )\n}\n\nexport default BookItem;\n","tokens":[["import","var(--ch-7)"]," ",["{ useActionState }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'react'","var(--ch-8)"],"\n",["import","var(--ch-7)"]," ",["{ submit }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'./actions'","var(--ch-8)"],"\n",["import","var(--ch-7)"]," ",["SubmitButton","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'./submit-button'","var(--ch-8)"],"\n\n",["export interface","var(--ch-7)"]," ",["Book","var(--ch-3)"]," ",["{","var(--ch-4)"],"\n  ",["id","var(--ch-3)"],[":","var(--ch-7)"]," ",["string","var(--ch-2)"],[",","var(--ch-4)"],"\n  ",["title","var(--ch-3)"],[":","var(--ch-7)"]," ",["string","var(--ch-2)"],[",","var(--ch-4)"],"\n  ",["count","var(--ch-3)"],[":","var(--ch-7)"]," ",["number","var(--ch-2)"],"\n",["}","var(--ch-4)"],"\n\n",["function","var(--ch-7)"]," ",["BookItem","var(--ch-5)"],["({","var(--ch-4)"]," ",["id","var(--ch-3)"],[",","var(--ch-4)"]," ",["title","var(--ch-3)"],[",","var(--ch-4)"]," ",["onSubmit","var(--ch-3)"]," ",["}","var(--ch-4)"],[":","var(--ch-7)"]," ",["{","var(--ch-4)"],"\n  ",["id","var(--ch-3)"],[":","var(--ch-7)"]," ",["string","var(--ch-2)"],[",","var(--ch-4)"],"\n  ",["title","var(--ch-3)"],[":","var(--ch-7)"]," ",["string","var(--ch-2)"],[",","var(--ch-4)"],"\n  ",["onSubmit","var(--ch-5)"],[":","var(--ch-7)"]," ",["(","var(--ch-4)"],["book","var(--ch-3)"],[":","var(--ch-7)"]," ",["Book","var(--ch-3)"],[")","var(--ch-4)"]," ",["=>","var(--ch-7)"]," ",["any","var(--ch-2)"],"\n",["}) {","var(--ch-4)"],"\n  ",["const","var(--ch-7)"]," ",["[","var(--ch-4)"],["count","var(--ch-2)"],[",","var(--ch-4)"]," ",["formAction","var(--ch-2)"],["]","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["useActionState","var(--ch-5)"],["<","var(--ch-4)"],["number","var(--ch-2)"],[",","var(--ch-4)"]," ",["FormData","var(--ch-3)"],[">(","var(--ch-4)"],"\n    ",["(","var(--ch-4)"],["cur","var(--ch-3)"],[",","var(--ch-4)"]," ",["formData","var(--ch-3)"],[")","var(--ch-4)"]," ",["=>","var(--ch-7)"]," ",["submit","var(--ch-5)"],["(cur, formData, onSubmit),","var(--ch-4)"]," ",["0","var(--ch-2)"],"\n  ",[")","var(--ch-4)"],"\n\n  ",["return","var(--ch-7)"]," ",["(","var(--ch-4)"],"\n    ",["<","var(--ch-4)"],["form","var(--ch-6)"]," ",["action","var(--ch-2)"],["={","var(--ch-7)"],["formAction","var(--ch-4)"],["}","var(--ch-7)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'border border-gray-200 p-4 my-3 rounded'","var(--ch-8)"],[">","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["h4","var(--ch-6)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'!my-2 font-bold text-lg'","var(--ch-8)"],[">book name:","var(--ch-4)"]," ",["{","var(--ch-7)"],["title","var(--ch-4)"],["}","var(--ch-7)"],["</","var(--ch-4)"],["h4","var(--ch-6)"],[">","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["input","var(--ch-6)"]," ",["type","var(--ch-2)"],["=","var(--ch-7)"],["\"hidden\"","var(--ch-8)"]," ",["name","var(--ch-2)"],["=","var(--ch-7)"],["'title'","var(--ch-8)"]," ",["value","var(--ch-2)"],["={","var(--ch-7)"],["title","var(--ch-4)"],["}","var(--ch-7)"]," ",["/>","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["input","var(--ch-6)"]," ",["type","var(--ch-2)"],["=","var(--ch-7)"],["\"hidden\"","var(--ch-8)"]," ",["name","var(--ch-2)"],["=","var(--ch-7)"],["'id'","var(--ch-8)"]," ",["value","var(--ch-2)"],["={","var(--ch-7)"],["id","var(--ch-4)"],["}","var(--ch-7)"]," ",["/>","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["div","var(--ch-6)"]," ",["style","var(--ch-2)"],["={","var(--ch-7)"],["{ marginBottom:","var(--ch-4)"]," ",["'20px'","var(--ch-8)"]," ",["}","var(--ch-4)"],["}","var(--ch-7)"],[">cart count:","var(--ch-4)"]," ",["{","var(--ch-7)"],["count","var(--ch-4)"],["}","var(--ch-7)"],["</","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["SubmitButton","var(--ch-6)"],[">ADD TO CART</","var(--ch-4)"],["SubmitButton","var(--ch-6)"],[">","var(--ch-4)"],"\n    ",["</","var(--ch-4)"],["form","var(--ch-6)"],[">","var(--ch-4)"],"\n  ",[")","var(--ch-4)"],"\n",["}","var(--ch-4)"],"\n\n",["export default","var(--ch-7)"]," ",["BookItem;","var(--ch-4)"],"\n"],"annotations":[],"themeName":"github-from-css","style":{"color":"var(--ch-4)","background":"var(--ch-16)","colorScheme":"var(--ch-0)"}},{"meta":"list.tsx -c","value":"import { Book } from './book-item'\n\nfunction CartList({ books = [] }: {\n  books: Book[]\n}) {\n  return (\n    <div>\n      {books.map((book, index) => (\n        <div key={`cart_${index}`} className='border border-yellow-400 p-4 rounded my-4'>\n          <div className='font-bold'>title: {book.title}</div>\n          <div>id: {book.id}</div>\n          <div>count: {book.count || 0}</div>\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default CartList","lang":"tsx","code":"import { Book } from './book-item'\n\nfunction CartList({ books = [] }: {\n  books: Book[]\n}) {\n  return (\n    <div>\n      {books.map((book, index) => (\n        <div key={`cart_${index}`} className='border border-yellow-400 p-4 rounded my-4'>\n          <div className='font-bold'>title: {book.title}</div>\n          <div>id: {book.id}</div>\n          <div>count: {book.count || 0}</div>\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default CartList","tokens":[["import","var(--ch-7)"]," ",["{ Book }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'./book-item'","var(--ch-8)"],"\n\n",["function","var(--ch-7)"]," ",["CartList","var(--ch-5)"],["({","var(--ch-4)"]," ",["books","var(--ch-3)"]," ",["=","var(--ch-7)"]," ",["[] }","var(--ch-4)"],[":","var(--ch-7)"]," ",["{","var(--ch-4)"],"\n  ",["books","var(--ch-3)"],[":","var(--ch-7)"]," ",["Book","var(--ch-3)"],["[]","var(--ch-4)"],"\n",["}) {","var(--ch-4)"],"\n  ",["return","var(--ch-7)"]," ",["(","var(--ch-4)"],"\n    ",["<","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n      ",["{","var(--ch-7)"],["books.","var(--ch-4)"],["map","var(--ch-5)"],["((","var(--ch-4)"],["book","var(--ch-3)"],[",","var(--ch-4)"]," ",["index","var(--ch-3)"],[")","var(--ch-4)"]," ",["=>","var(--ch-7)"]," ",["(","var(--ch-4)"],"\n        ",["<","var(--ch-4)"],["div","var(--ch-6)"]," ",["key","var(--ch-2)"],["={","var(--ch-7)"],["`cart_${","var(--ch-8)"],["index","var(--ch-4)"],["}`","var(--ch-8)"],["}","var(--ch-7)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'border border-yellow-400 p-4 rounded my-4'","var(--ch-8)"],[">","var(--ch-4)"],"\n          ",["<","var(--ch-4)"],["div","var(--ch-6)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'font-bold'","var(--ch-8)"],[">title:","var(--ch-4)"]," ",["{","var(--ch-7)"],["book.title","var(--ch-4)"],["}","var(--ch-7)"],["</","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n          ",["<","var(--ch-4)"],["div","var(--ch-6)"],[">id:","var(--ch-4)"]," ",["{","var(--ch-7)"],["book.id","var(--ch-4)"],["}","var(--ch-7)"],["</","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n          ",["<","var(--ch-4)"],["div","var(--ch-6)"],[">count:","var(--ch-4)"]," ",["{","var(--ch-7)"],["book.count","var(--ch-4)"]," ",["||","var(--ch-7)"]," ",["0","var(--ch-2)"],["}","var(--ch-7)"],["</","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n        ",["</","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n      ",["))","var(--ch-4)"],["}","var(--ch-7)"],"\n    ",["</","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n  ",[")","var(--ch-4)"],"\n",["}","var(--ch-4)"],"\n\n",["export default","var(--ch-7)"]," ",["CartList","var(--ch-4)"]],"annotations":[],"themeName":"github-from-css","style":{"color":"var(--ch-4)","background":"var(--ch-16)","colorScheme":"var(--ch-0)"}},{"meta":"actions.ts -c","value":"import { Book } from './book-item'\n\nexport async function submit(cur: number, formData: FormData, onSubmit: (book: Book) => any) {\n  const id = formData.get('id') as string\n  const title = formData.get('title') as string\n  await new Promise((resolve) => {\n    setTimeout(() => {\n      onSubmit({id, title, count: cur + 1})\n      resolve('')\n    }, 300)\n  })\n  return cur + 1\n}\n","lang":"tsx","code":"import { Book } from './book-item'\n\nexport async function submit(cur: number, formData: FormData, onSubmit: (book: Book) => any) {\n  const id = formData.get('id') as string\n  const title = formData.get('title') as string\n  await new Promise((resolve) => {\n    setTimeout(() => {\n      onSubmit({id, title, count: cur + 1})\n      resolve('')\n    }, 300)\n  })\n  return cur + 1\n}\n","tokens":[["import","var(--ch-7)"]," ",["{ Book }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'./book-item'","var(--ch-8)"],"\n\n",["export async function","var(--ch-7)"]," ",["submit","var(--ch-5)"],["(","var(--ch-4)"],["cur","var(--ch-3)"],[":","var(--ch-7)"]," ",["number","var(--ch-2)"],[",","var(--ch-4)"]," ",["formData","var(--ch-3)"],[":","var(--ch-7)"]," ",["FormData","var(--ch-3)"],[",","var(--ch-4)"]," ",["onSubmit","var(--ch-5)"],[":","var(--ch-7)"]," ",["(","var(--ch-4)"],["book","var(--ch-3)"],[":","var(--ch-7)"]," ",["Book","var(--ch-3)"],[")","var(--ch-4)"]," ",["=>","var(--ch-7)"]," ",["any","var(--ch-2)"],[") {","var(--ch-4)"],"\n  ",["const","var(--ch-7)"]," ",["id","var(--ch-2)"]," ",["=","var(--ch-7)"]," ",["formData.","var(--ch-4)"],["get","var(--ch-5)"],["(","var(--ch-4)"],["'id'","var(--ch-8)"],[")","var(--ch-4)"]," ",["as","var(--ch-7)"]," ",["string","var(--ch-2)"],"\n  ",["const","var(--ch-7)"]," ",["title","var(--ch-2)"]," ",["=","var(--ch-7)"]," ",["formData.","var(--ch-4)"],["get","var(--ch-5)"],["(","var(--ch-4)"],["'title'","var(--ch-8)"],[")","var(--ch-4)"]," ",["as","var(--ch-7)"]," ",["string","var(--ch-2)"],"\n  ",["await new","var(--ch-7)"]," ",["Promise","var(--ch-2)"],["((","var(--ch-4)"],["resolve","var(--ch-3)"],[")","var(--ch-4)"]," ",["=>","var(--ch-7)"]," ",["{","var(--ch-4)"],"\n    ",["setTimeout","var(--ch-5)"],["(()","var(--ch-4)"]," ",["=>","var(--ch-7)"]," ",["{","var(--ch-4)"],"\n      ",["onSubmit","var(--ch-5)"],["({id, title, count: cur","var(--ch-4)"]," ",["+","var(--ch-7)"]," ",["1","var(--ch-2)"],["})","var(--ch-4)"],"\n      ",["resolve","var(--ch-5)"],["(","var(--ch-4)"],["''","var(--ch-8)"],[")","var(--ch-4)"],"\n    ",["},","var(--ch-4)"]," ",["300","var(--ch-2)"],[")","var(--ch-4)"],"\n  ",["})","var(--ch-4)"],"\n  ",["return","var(--ch-7)"]," ",["cur","var(--ch-4)"]," ",["+","var(--ch-7)"]," ",["1","var(--ch-2)"],"\n",["}","var(--ch-4)"],"\n"],"annotations":[],"themeName":"github-from-css","style":{"color":"var(--ch-4)","background":"var(--ch-16)","colorScheme":"var(--ch-0)"}},{"meta":"submit-button.tsx -c","value":"import { useFormStatus } from 'react-dom'\nimport Button from 'components/ui/button'\nimport { PropsWithChildren } from 'react'\n\nexport default function SubmitButton({ children }: PropsWithChildren) {\n  const { pending } = useFormStatus()\n  return (\n    <div className='text-right'>\n      <Button primary disabled={pending}>\n        {children} {pending ? '...' : ''}\n      </Button>\n    </div>\n  )\n}\n","lang":"tsx","code":"import { useFormStatus } from 'react-dom'\nimport Button from 'components/ui/button'\nimport { PropsWithChildren } from 'react'\n\nexport default function SubmitButton({ children }: PropsWithChildren) {\n  const { pending } = useFormStatus()\n  return (\n    <div className='text-right'>\n      <Button primary disabled={pending}>\n        {children} {pending ? '...' : ''}\n      </Button>\n    </div>\n  )\n}\n","tokens":[["import","var(--ch-7)"]," ",["{ useFormStatus }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'react-dom'","var(--ch-8)"],"\n",["import","var(--ch-7)"]," ",["Button","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'components/ui/button'","var(--ch-8)"],"\n",["import","var(--ch-7)"]," ",["{ PropsWithChildren }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'react'","var(--ch-8)"],"\n\n",["export default function","var(--ch-7)"]," ",["SubmitButton","var(--ch-5)"],["({ children }","var(--ch-3)"],[":","var(--ch-7)"]," ",["PropsWithChildren)","var(--ch-3)"]," ",["{","var(--ch-4)"],"\n  ",["const","var(--ch-7)"]," ",["{","var(--ch-4)"]," ",["pending","var(--ch-2)"]," ",["}","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["useFormStatus","var(--ch-5)"],["()","var(--ch-4)"],"\n  ",["return","var(--ch-7)"]," ",["(","var(--ch-4)"],"\n    ",["<","var(--ch-4)"],["div","var(--ch-6)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'text-right'","var(--ch-8)"],[">","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["Button","var(--ch-6)"]," ",["primary disabled","var(--ch-2)"],["={","var(--ch-7)"],["pending","var(--ch-4)"],["}","var(--ch-7)"],[">","var(--ch-4)"],"\n        ",["{","var(--ch-7)"],["children","var(--ch-4)"],["} {","var(--ch-7)"],["pending","var(--ch-4)"]," ",["?","var(--ch-7)"]," ",["'...'","var(--ch-8)"]," ",[":","var(--ch-7)"]," ",["''","var(--ch-8)"],["}","var(--ch-7)"],"\n      ",["</","var(--ch-4)"],["Button","var(--ch-6)"],[">","var(--ch-4)"],"\n    ",["</","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n  ",[")","var(--ch-4)"],"\n",["}","var(--ch-4)"],"\n"],"annotations":[],"themeName":"github-from-css","style":{"color":"var(--ch-4)","background":"var(--ch-16)","colorScheme":"var(--ch-0)"}}]}]]}]}]
b:["$","div",null,{"className":"code-tabs border rounded border-gray-200 overflow-hidden my-5","children":["$","$L17",null,{"children":[["$","$L18",null,{"tabs":[{"meta":"index.tsx -c","value":"import { useActionState } from 'react'\n\nasync function increment(cur: number) {\n  return cur + 1\n}\n\nexport default function Demo01() {\n  const [state, action] = useActionState(increment, 0)\n  return (\n    <form action={action} className='flex items-center'>\n      <button className='button'>count++</button>\n      <div className='ml-4'>{state}</div>\n    </form>\n  )\n}\n","lang":"jsx"}]}],["$","$L19",null,{"highlighteds":[{"meta":"index.tsx -c","value":"import { useActionState } from 'react'\n\nasync function increment(cur: number) {\n  return cur + 1\n}\n\nexport default function Demo01() {\n  const [state, action] = useActionState(increment, 0)\n  return (\n    <form action={action} className='flex items-center'>\n      <button className='button'>count++</button>\n      <div className='ml-4'>{state}</div>\n    </form>\n  )\n}\n","lang":"jsx","code":"import { useActionState } from 'react'\n\nasync function increment(cur: number) {\n  return cur + 1\n}\n\nexport default function Demo01() {\n  const [state, action] = useActionState(increment, 0)\n  return (\n    <form action={action} className='flex items-center'>\n      <button className='button'>count++</button>\n      <div className='ml-4'>{state}</div>\n    </form>\n  )\n}\n","tokens":[["import","var(--ch-7)"]," ",["{ useActionState }","var(--ch-4)"]," ",["from","var(--ch-7)"]," ",["'react'","var(--ch-8)"],"\n\n",["async function","var(--ch-7)"]," ",["increment","var(--ch-5)"],["(","var(--ch-4)"],["cur","var(--ch-3)"],[":","var(--ch-7)"]," ",["number","var(--ch-2)"],[") {","var(--ch-4)"],"\n  ",["return","var(--ch-7)"]," ",["cur","var(--ch-4)"]," ",["+","var(--ch-7)"]," ",["1","var(--ch-2)"],"\n",["}","var(--ch-4)"],"\n\n",["export default function","var(--ch-7)"]," ",["Demo01","var(--ch-5)"],["()","var(--ch-3)"]," ",["{","var(--ch-4)"],"\n  ",["const","var(--ch-7)"]," ",["[","var(--ch-4)"],["state","var(--ch-2)"],[",","var(--ch-4)"]," ",["action","var(--ch-2)"],["]","var(--ch-4)"]," ",["=","var(--ch-7)"]," ",["useActionState","var(--ch-5)"],["(increment,","var(--ch-4)"]," ",["0","var(--ch-2)"],[")","var(--ch-4)"],"\n  ",["return","var(--ch-7)"]," ",["(","var(--ch-4)"],"\n    ",["<","var(--ch-4)"],["form","var(--ch-6)"]," ",["action","var(--ch-2)"],["={","var(--ch-7)"],["action","var(--ch-4)"],["}","var(--ch-7)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'flex items-center'","var(--ch-8)"],[">","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["button","var(--ch-6)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'button'","var(--ch-8)"],[">count++</","var(--ch-4)"],["button","var(--ch-6)"],[">","var(--ch-4)"],"\n      ",["<","var(--ch-4)"],["div","var(--ch-6)"]," ",["className","var(--ch-2)"],["=","var(--ch-7)"],["'ml-4'","var(--ch-8)"],[">","var(--ch-4)"],["{","var(--ch-7)"],["state","var(--ch-4)"],["}","var(--ch-7)"],["</","var(--ch-4)"],["div","var(--ch-6)"],[">","var(--ch-4)"],"\n    ",["</","var(--ch-4)"],["form","var(--ch-6)"],[">","var(--ch-4)"],"\n  ",[")","var(--ch-4)"],"\n",["}","var(--ch-4)"],"\n"],"annotations":[],"themeName":"github-from-css","style":{"color":"var(--ch-4)","background":"var(--ch-16)","colorScheme":"var(--ch-0)"}}]}]]}]}]
14:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
12:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"usehook - 前端顶级精英俱乐部"}],["$","meta","2",{"name":"description","content":"最好的前端学习网站, react, react19, react hooks, zustand"}],["$","meta","3",{"name":"author","content":"这波能反杀"}],["$","meta","4",{"name":"keywords","content":"react, react19, react hooks, zustand"}],["$","link","5",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}]]
10:null
