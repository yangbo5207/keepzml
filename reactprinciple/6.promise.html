<!DOCTYPE html><html lang="zh"><head><meta charSet="UTF-8"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1, user-scalable=no"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/569ce4b8f30dc480-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/d498c84e4ab246b3.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/3b8b4919706de55d.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/738174a5e4c964fb.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/1823fcda9d6f3fc8.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/0b88b513390d781e.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-e1572ada824d8f66.js"/><script src="/_next/static/chunks/4bd1b696-7ee478506e725a9f.js" async=""></script><script src="/_next/static/chunks/1517-0ddfb5deb84e2fb2.js" async=""></script><script src="/_next/static/chunks/main-app-5719cf1fed8b11dc.js" async=""></script><script src="/_next/static/chunks/7525-411280bffc37a107.js" async=""></script><script src="/_next/static/chunks/8173-1aab990e083a60ce.js" async=""></script><script src="/_next/static/chunks/5926-2f921190ce1e6581.js" async=""></script><script src="/_next/static/chunks/3974-a1a1a9aca3315bf5.js" async=""></script><script src="/_next/static/chunks/app/layout-42df43a67d50e5c7.js" async=""></script><script src="/_next/static/chunks/app/reactprinciple/layout-141593afaafd3cb8.js" async=""></script><script src="/_next/static/chunks/7cfd557f-0718c923d48595ad.js" async=""></script><script src="/_next/static/chunks/4320-eb0b4108191194bc.js" async=""></script><script src="/_next/static/chunks/3152-e813ba8dd61cd947.js" async=""></script><script src="/_next/static/chunks/8993-e7703979b5445f48.js" async=""></script><script src="/_next/static/chunks/app/reactprinciple/(0.eventloop)/6.promise/layout-4434331d5e4556ba.js" async=""></script><script src="/_next/static/chunks/2794-e7741df2722cee1f.js" async=""></script><script src="/_next/static/chunks/app/reactprinciple/(0.eventloop)/6.promise/page-6ea2b695323b3491.js" async=""></script><meta name="next-size-adjust" content=""/><link href="https://framerusercontent.com/images/YRd2KCq4G2aXNg15aHvl7AtcGQ.png" rel="icon" media="(prefers-color-scheme: light)"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/><title>usehook - 前端顶级精英俱乐部</title><meta name="description" content="最好的前端学习网站, react, react19, react hooks, zustand"/><meta name="author" content="这波能反杀"/><meta name="keywords" content="react, react19, react hooks, zustand"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><link rel="stylesheet" href="https://rsms.me/inter/inter.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_4d318d __variable_ea5f4b antialiased"><header class="fixed z-50 top-0 flex justify-between min-w-[320px] backdrop-blur-sm w-full bg-gray-50/90 transition bg-white/90"><aside id="vp-aside" class="fixed top-0 h-16 items-center transition bg-gray-50"><div class="px-4"><a class="flex items-center" href="/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6"><path fill-rule="evenodd" d="M12 1.5a.75.75 0 0 1 .75.75V4.5a.75.75 0 0 1-1.5 0V2.25A.75.75 0 0 1 12 1.5ZM5.636 4.136a.75.75 0 0 1 1.06 0l1.592 1.591a.75.75 0 0 1-1.061 1.06l-1.591-1.59a.75.75 0 0 1 0-1.061Zm12.728 0a.75.75 0 0 1 0 1.06l-1.591 1.592a.75.75 0 0 1-1.06-1.061l1.59-1.591a.75.75 0 0 1 1.061 0Zm-6.816 4.496a.75.75 0 0 1 .82.311l5.228 7.917a.75.75 0 0 1-.777 1.148l-2.097-.43 1.045 3.9a.75.75 0 0 1-1.45.388l-1.044-3.899-1.601 1.42a.75.75 0 0 1-1.247-.606l.569-9.47a.75.75 0 0 1 .554-.68ZM3 10.5a.75.75 0 0 1 .75-.75H6a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 10.5Zm14.25 0a.75.75 0 0 1 .75-.75h2.25a.75.75 0 0 1 0 1.5H18a.75.75 0 0 1-.75-.75Zm-8.962 3.712a.75.75 0 0 1 0 1.061l-1.591 1.591a.75.75 0 1 1-1.061-1.06l1.591-1.592a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path></svg><div class="font-bold ml-2">前端码易</div></a></div></aside><div id="vp-content" class="h-15 flex items-center pr-4 lg:pr-0"><div class="flex px-4 md:px-8 2xl:px-24 flex-1"><div class="md:hidden"><a class="flex items-center" href="/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6"><path fill-rule="evenodd" d="M12 1.5a.75.75 0 0 1 .75.75V4.5a.75.75 0 0 1-1.5 0V2.25A.75.75 0 0 1 12 1.5ZM5.636 4.136a.75.75 0 0 1 1.06 0l1.592 1.591a.75.75 0 0 1-1.061 1.06l-1.591-1.59a.75.75 0 0 1 0-1.061Zm12.728 0a.75.75 0 0 1 0 1.06l-1.591 1.592a.75.75 0 0 1-1.06-1.061l1.59-1.591a.75.75 0 0 1 1.061 0Zm-6.816 4.496a.75.75 0 0 1 .82.311l5.228 7.917a.75.75 0 0 1-.777 1.148l-2.097-.43 1.045 3.9a.75.75 0 0 1-1.45.388l-1.044-3.899-1.601 1.42a.75.75 0 0 1-1.247-.606l.569-9.47a.75.75 0 0 1 .554-.68ZM3 10.5a.75.75 0 0 1 .75-.75H6a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 10.5Zm14.25 0a.75.75 0 0 1 .75-.75h2.25a.75.75 0 0 1 0 1.5H18a.75.75 0 0 1-.75-.75Zm-8.962 3.712a.75.75 0 0 1 0 1.061l-1.591 1.591a.75.75 0 1 1-1.061-1.06l1.591-1.592a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path></svg><div class="font-bold ml-2">前端码易</div></a></div><a class="hidden lg:flex text-[14px] items-center py-2 px-3 rounded-md hover:bg-gray-100 transition cursor-pointer text-blue-600" href="/reactprinciple"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ghost font-bold"><path d="M9 10h.01"></path><path d="M15 10h.01"></path><path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"></path></svg><span class="ml-1 text-sm font-bold">React 原理面试</span></a><a class="hidden lg:flex text-gray-600 text-[14px] items-center py-2 px-3 rounded-md hover:bg-gray-100 transition cursor-pointer" href="/r19base"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bell-dot font-bold"><path d="M10.268 21a2 2 0 0 0 3.464 0"></path><path d="M13.916 2.314A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.74 7.327A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673 9 9 0 0 1-.585-.665"></path><circle cx="18" cy="8" r="3"></circle></svg><span class="ml-1 text-sm font-bold">React 19 . 基础</span></a><a class="hidden lg:flex text-gray-600 text-[14px] items-center py-2 px-3 rounded-md hover:bg-gray-100 transition cursor-pointer" href="/r19plus"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bell-electric font-bold"><path d="M18.8 4A6.3 8.7 0 0 1 20 9"></path><path d="M9 9h.01"></path><circle cx="9" cy="9" r="7"></circle><rect width="10" height="6" x="4" y="16" rx="2"></rect><path d="M14 19c3 0 4.6-1.6 4.6-1.6"></path><circle cx="20" cy="16" r="2"></circle></svg><span class="ml-1 text-sm font-bold">React 19 . 尊享</span></a><a class="hidden lg:flex text-gray-600 text-[14px] items-center py-2 px-3 rounded-md hover:bg-gray-100 transition cursor-pointer" href="/supercss"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-zap font-bold"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg><span class="ml-1 text-sm font-bold">超级 CSS</span></a></div><aside id="hp-aside" class="hidden lg:flex h-16 items-center pr-6 space-x-4"><div class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-round-plus"><path d="M2 21a8 8 0 0 1 13.292-6"></path><circle cx="10" cy="8" r="5"></circle><path d="M19 16v6"></path><path d="M22 19h-6"></path></svg><div class="ml-2">交流群</div></div><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><a class="flex items-center px-8 py-1 rounded bg-blue-500 text-white" href="https://xinyuzone.cn/connect/oauth2/authorize?appid=e89ookqtbk74&amp;redirect_uri=https%3A%2F%2Fusehook.cn%2F&amp;response_type=code&amp;scope=openapi_userinfo#xinyu_redirect"><div>登录</div></a></aside><div class="lg:hidden flex items-center text-gray-700"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5M12 17.25h8.25"></path></svg></div></div></header><div class="pt-16 md:flex"><aside id="vp-aside" class="fixed top-0 left-0 bottom-0 overflow-y-scroll bg-gray-50 hidden md:block"><div class="px-6 w-full"><div class="flex items-center pb-8 pt-24 sticky top-0 bg-gray-50 border-b border-b-gray-200 mb-8"><div class="flex items-center justify-between p-1 border mr-3 rounded-md border-blue-200"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder-down text-blue-500"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"></path><path d="M12 10v6"></path><path d="m15 13-3 3-3-3"></path></svg></div><div class="text-sm"><div>当前版本</div><div class="text-gray-500">react@19.0.0</div></div></div><nav class="pb-8"><div class="pb-12"><div class="text-xs text-gray-400 first:pt-0 pb-4 pt-8" style="opacity:0;transform:translateX(-30px)">事件循环体系</div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/0.multi"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">0、浏览器多进程架构</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/1.overview"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">1、事件循环概述</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/2.callstack"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">2、函数调用栈</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/3.threads"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">3、线程介绍</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/4.raf"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">4、刷新率与执行队列</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/5.setTimeout"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">5、setTimeout 原理详解</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="transition cursor-pointer text-blue-700" href="/reactprinciple/6.promise"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">6、Promise 原理详解</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/7.eventloop"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">7、事件循环机制</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/8.priority"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">8、优先级队列</div></li></a></div><div class="text-xs text-gray-400 first:pt-0 pb-4 pt-8" style="opacity:0;transform:translateX(-30px)">并发模式</div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/1.concept"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">1、概念</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/2.basecase"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">2、案例演示并发模式</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/3.cutin"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">3、高优先级插队</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/4.cutindiff"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">4、插队的影响、与中断的区别</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/5.shouldYield"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">5、中断条件：shouldYield</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/6.task"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">6、React 中的任务与队列</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/7.ensureRootIsScheduled"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">7、ensureRootIsScheduled</div><label class="border px-2 rounded-full text-xs bg-green-100 text-green-500 border-green-200 ml-2">n</label></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/8.mergeupdate"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">8、合并多个更新触发</div><label class="border px-2 rounded-full text-xs bg-green-100 text-green-500 border-green-200 ml-2">n</label></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/9.loopse"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">9、taskQueue 队列循环的启动与结束</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/10.timeslicing"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">10、时间切片是如何实现的</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/11.workLoop"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">11、workLoop 循环完整逻辑</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/12.prioritylevel"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">12、React 中的优先级设计</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/13.lane"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">13、lane 模型</div></li></a></div><div class="text-xs text-gray-400 first:pt-0 pb-4 pt-8" style="opacity:0;transform:translateX(-30px)">Fiber 架构</div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/0.three"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">1、三种节点对象</div></li></a></div><div style="opacity:0;transform:translateX(-30px)"><a class="text-gray-700 transition cursor-pointer" href="/reactprinciple/1.fiber"><li class="py-2 text-xs transition flex items-center justify-between hover:text-blue-700"><div class="line-clamp-1">2、Fiber</div></li></a></div></div></nav></div></aside><div id="vp-content"><div class="pt-4 md:pt-8 relative flex justify-center"><div id="cp-content" class="px-4 md:px-8 2xl:px-24 pb-24 w-0 flex-1"><div class="w-full py-32 flex flex-col justify-center items-center"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tent text-cyan-500"><path d="M3.5 21 14 3"></path><path d="M20.5 21 10 3"></path><path d="M15.5 21 12 15l-3.5 6"></path><path d="M2 21h20"></path></svg><div class="my-2 text-lg font-bold">您还没有登录</div><div class="text-xs">本网站仅支持通过三方授权平台新语进行登录</div><a class="bg-green-500 py-1.5 px-4 text-white rounded mt-8" href="https://xinyuzone.cn/connect/oauth2/authorize?appid=e89ookqtbk74&amp;redirect_uri=https%3A%2F%2Fusehook.cn%2F&amp;response_type=code&amp;scope=openapi_userinfo#xinyu_redirect">登录</a></div><div id="diviler_" class="border-b border-gray-300 my-8 border-dashed scroll-mt-24"></div></div><aside id="cp-aside" class="pr-6 relative items-start"><div id="headings" class="w-full sticky top-24 space-y-4 text-gray-700"><a class="block rounded bg-gray-50 p-4 border border-gray-100" target="_blank" href="https://xinyuzone.cn/column/1818097927437131776"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-telescope text-blue-400"><path d="m10.065 12.493-6.18 1.318a.934.934 0 0 1-1.108-.702l-.537-2.15a1.07 1.07 0 0 1 .691-1.265l13.504-4.44"></path><path d="m13.56 11.747 4.332-.924"></path><path d="m16 21-3.105-6.21"></path><path d="M16.485 5.94a2 2 0 0 1 1.455-2.425l1.09-.272a1 1 0 0 1 1.212.727l1.515 6.06a1 1 0 0 1-.727 1.213l-1.09.272a2 2 0 0 1-2.425-1.455z"></path><path d="m6.158 8.633 1.114 4.456"></path><path d="m8 21 3.105-6.21"></path><circle cx="12" cy="13" r="2"></circle></svg><div class="font-bold my-2">JavaScript 核心进阶</div><div class="text-sm leading-6">从构建基础知识体系出发，抓紧核心基础内容，给你地道的前端进阶思维</div></a><a class="block rounded bg-gray-50 p-4 border border-gray-100" target="_blank" href="https://usehook.cn/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mouse-pointer-click text-green-400"><path d="M14 4.1 12 6"></path><path d="m5.1 8-2.9-.8"></path><path d="m6 12-1.9 2"></path><path d="M7.2 2.2 8 5.1"></path><path d="M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z"></path></svg><div class="font-bold my-2">React 19 全解</div><div class="text-sm leading-6">全网第一本系统介绍 React 19 的小册，大量实践案例，给你沉浸式学习体验</div></a><a class="block rounded bg-gray-50 p-4 border border-gray-100" target="_blank" href="https://usehook.cn/advance/index"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plane-takeoff text-red-400"><path d="M2 22h20"></path><path d="M6.36 17.4 4 17l-2-4 1.1-.55a2 2 0 0 1 1.8 0l.17.1a2 2 0 0 0 1.8 0L8 12 5 6l.9-.45a2 2 0 0 1 2.09.2l4.02 3a2 2 0 0 0 2.1.2l4.19-2.06a2.41 2.41 0 0 1 1.73-.17L21 7a1.4 1.4 0 0 1 .87 1.99l-.38.76c-.23.46-.6.84-1.07 1.08L7.58 17.2a2 2 0 0 1-1.22.18Z"></path></svg><div class="font-bold my-2">React 19 尊享版</div><div class="text-sm leading-6">专为前端资深架构师提供的进阶内容，聚焦项目架构，强化开发效率与开发体验</div></a><div class="rounded bg-gray-100 py-8 text-center text-gray-500"><div class="">成为赞助商</div></div><div class="rounded py-2 border border-gray-200 text-center flex items-center justify-center cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-to-line"><path d="M5 3h14"></path><path d="m18 13-6-6-6 6"></path><path d="M12 7v14"></path></svg><div class="ml-2">滚动到顶部</div></div><div class="rounded py-2 border border-gray-200 text-center flex items-center justify-center cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-to-line"><path d="M12 17V3"></path><path d="m6 11 6 6 6-6"></path><path d="M19 21H5"></path></svg><div class="ml-2">滚动到评论</div></div></div></aside></div><button class="rounded border font-medium cursor-pointer transition inline-flex items-center justify-center space-x-1.5 text-[13px] py-1 px-3 bg-white border-sky-300 text-sky-500 hover:border-sky-400 hover:text-sky-600 active:text-sky-700 hover:bg-sky-50 active:bg-sky-100 fixed bottom-6 right-4 md:hidden">目录<span class="absolute flex h-3 w-3 right-[-5px] top-[-5px]"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-400 opacity-75"></span><span class="relative inline-flex rounded-full h-3 w-3 bg-sky-500"></span></span></button></div></div><script src="/_next/static/chunks/webpack-e1572ada824d8f66.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[51790,[\"7525\",\"static/chunks/7525-411280bffc37a107.js\",\"8173\",\"static/chunks/8173-1aab990e083a60ce.js\",\"5926\",\"static/chunks/5926-2f921190ce1e6581.js\",\"3974\",\"static/chunks/3974-a1a1a9aca3315bf5.js\",\"7177\",\"static/chunks/app/layout-42df43a67d50e5c7.js\"],\"default\"]\n3:I[73974,[\"7525\",\"static/chunks/7525-411280bffc37a107.js\",\"8173\",\"static/chunks/8173-1aab990e083a60ce.js\",\"5926\",\"static/chunks/5926-2f921190ce1e6581.js\",\"3974\",\"static/chunks/3974-a1a1a9aca3315bf5.js\",\"7177\",\"static/chunks/app/layout-42df43a67d50e5c7.js\"],\"default\"]\n4:I[15244,[],\"\"]\n5:I[43866,[],\"\"]\n6:I[14547,[],\"ClientSegmentRoot\"]\n7:I[83836,[\"7525\",\"static/chunks/7525-411280bffc37a107.js\",\"8173\",\"static/chunks/8173-1aab990e083a60ce.js\",\"5926\",\"static/chunks/5926-2f921190ce1e6581.js\",\"3974\",\"static/chunks/3974-a1a1a9aca3315bf5.js\",\"5145\",\"static/chunks/app/reactprinciple/layout-141593afaafd3cb8.js\"],\"default\"]\n9:I[98087,[\"8150\",\"static/chunks/7cfd557f-0718c923d48595ad.js\",\"7525\",\"static/chunks/7525-411280bffc37a107.js\",\"4320\",\"static/chunks/4320-eb0b4108191194bc.js\",\"8173\",\"static/chunks/8173-1aab990e083a60ce.js\",\"3152\",\"static/chunks/3152-e813ba8dd61cd947.js\",\"8993\",\"static/chunks/8993-e7703979b5445f48.js\",\"3707\",\"static/chunks/app/reactprinciple/(0.eventloop)/6.promise/layout-4434331d5e4556ba.js\"],\"default\"]\nb:I[87869,[\"7525\",\"static/chunks/7525-411280bffc37a107.js\",\"4320\",\"static/chunks/4320-eb0b4108191194bc.js\",\"5926\",\"static/chunks/5926-2f921190ce1e6581.js\",\"2794\",\"static/chunks/2794-e7741df2722cee1f.js\",\"8424\",\"static/chunks/app/reactprinciple/(0.eventloop)/6.promise/page-6ea2b695323b3491.js\"],\"default\"]\n14:I[86213,[],\"OutletBoundary\"]\n16:I[86213,[],\"MetadataBoundary\"]\n18:I[86213,[],\"ViewportBoundary\"]\n1a:I[34835,[],\"\"]\n:HL[\"/_next/static/media/569ce4b8f30dc480-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/d498c84e4ab246b3.css\",\"style\"]\n:HL[\"/_next/static/css/3b8b4919706de55d.css\",\"style"])</script><script>self.__next_f.push([1,"\"]\n:HL[\"/_next/static/css/738174a5e4c964fb.css\",\"style\"]\n:HL[\"/_next/static/css/1823fcda9d6f3fc8.css\",\"style\"]\n:HL[\"/_next/static/css/0b88b513390d781e.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"cbwxcebnYJVNnufvYVtp1\",\"p\":\"\",\"c\":[\"\",\"reactprinciple\",\"6.promise\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"reactprinciple\",{\"children\":[\"(0.eventloop)\",{\"children\":[\"6.promise\",{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d498c84e4ab246b3.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3b8b4919706de55d.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/738174a5e4c964fb.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"3\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/1823fcda9d6f3fc8.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"zh\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"meta\",null,{\"charSet\":\"UTF-8\"}],[\"$\",\"link\",null,{\"href\":\"https://framerusercontent.com/images/YRd2KCq4G2aXNg15aHvl7AtcGQ.png\",\"rel\":\"icon\",\"media\":\"(prefers-color-scheme: light)\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://rsms.me/inter/inter.css\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css\",\"integrity\":\"sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV\",\"crossOrigin\":\"anonymous\"}],[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1.0 maximum-scale=1, user-scalable=no\"}],[\"$\",\"meta\",null,{\"name\":\"mobile-web-app-capable\",\"content\":\"yes\"}],[\"$\",\"meta\",null,{\"name\":\"apple-mobile-web-app-status-bar-style\",\"content\":\"black-translucent\"}]]}],[\"$\",\"body\",null,{\"className\":\"__variable_4d318d __variable_ea5f4b antialiased\",\"children\":[\"$\",\"$L2\",null,{\"children\":[[\"$\",\"$L3\",null,{}],[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]}]]}]]}],{\"children\":[\"reactprinciple\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"Component\":\"$7\",\"slots\":{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"reactprinciple\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"params\":{},\"promise\":\"$@8\"}]]}],{\"children\":[\"(0.eventloop)\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"reactprinciple\",\"children\",\"(0.eventloop)\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"6.promise\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0b88b513390d781e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L9\",null,{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"reactprinciple\",\"children\",\"(0.eventloop)\",\"children\",\"6.promise\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"h3\",null,{\"id\":\"1-promise\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"1、\"}],\" Promise\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"解释 Promise 是一件很麻烦的事情。因为我们很难明确的说 Promise 到底是什么。大多数情况下我们都是在稀里糊涂的用他来解决一些异步的逻辑，也不会去深究它到底应该怎么去定义。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"最蛋疼的是，讲 Promise 的原理、或者手写 Promise 对象的实现，还成为了一个高频面试题。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"首先，Promise 肯定是一个对象。我们可以通过 \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"new Promise()\"}]}],\" 来创建一个 Promise 的实例。Promise 的实现和使用，都应该严格遵循 \",[\"$\",\"code\",null,{\"children\":\"Promise/A+\"}],\" 规范。所以 Promise 的实现方式就可以不用那么固定。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"也由于遵循了 \",[\"$\",\"code\",null,{\"children\":\"Promise/A+\"}],\" ，我们也可以称 Promise 是一个简化版的有限状态机制。每一个 Promise 实例中都会维护一个状态，对应三个值\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"pending\"}],\"：表示正在等待请求结果\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"fulfilled\"}],\"：通常是有了理想的结果，表示同意\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"rejected\"}],\"：通常是有了不理想的结果，表示拒绝\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"状态只能从 \",[\"$\",\"code\",null,{\"children\":\"pending\"}],\" 切换到两个结果态，而不能反过来。有了结果就表示请求结束，任务完成。因此，我们通常将 Promise 用于一个请求只包含两种结果的场景。例如\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"http 请求  -\u003e 请求成功、请求失败\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"弹窗按钮 -\u003e 确认、取消\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"2-promise-运行机制\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"2、\"}],\" Promise 运行机制\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"在 ECMASCript 中，提供了一个用于存储 Promise 任务的执行队列 PromiseJobs。并针对两个不同的结果提供了两个临时队列\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"[[PromiseFulfillReactions]]\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"[[PromiseRejectReactions]]\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"当我们在代码中执行 \",[\"$\",\"code\",null,{\"children\":\".then\"}],\" 方法时，就会创建一个 \",[\"$\",\"code\",null,{\"children\":\"job\"}],\"，并优先考虑进入到临时队列中。当 jobs 的状态，有了结果 \",[\"$\",\"code\",null,{\"children\":\"resolve() / reject()\"}],\" 之后，则会推送到执行队列中，等待执行。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"执行队列 PromiseJobs，滞后于函数调用栈执行，具体的执行顺序为\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"1、函数调用栈\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"2、promiseJobs 队列\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"3、\",[\"$\",\"code\",null,{\"children\":\"requestAnimationFrame\"}],\" \",[\"$\",\"code\",null,{\"children\":\"setTimeout\"}],\" 等其他异步任务队列\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"之所以是这个顺序是由于 PromiseJobs 队列是 JavaScript 自己维护的，因此它作为一个内部队列会被优先执行。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"promiseJobs 队列的清空逻辑与之前的执行队列。他的逻辑用该代码演示如下所示。\"}],\"\\n\",\"$La\",\"\\n\",[\"$\",\"p\",null,{\"children\":[\"但是这里有一个很不一样的地方，就是任务进入执行队列的时机。如果我们在执行 \",[\"$\",\"code\",null,{\"children\":\"job\"}],\" 的过程中，产生了新的 \",[\"$\",\"code\",null,{\"children\":\"job\"}],\"，或者在临时队列中，有 \",[\"$\",\"code\",null,{\"children\":\"job\"}],\" 的\",[\"$\",\"strong\",null,{\"children\":\"状态有了结果\"}],\"，该任务依然会推入到正在循环的执行队列中去执行，直到 \",[\"$\",\"code\",null,{\"children\":\"PromiseJobs\"}],\" 被清空为止。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"用代码来演示这个过程，先看完整案例。这里我按照 \",[\"$\",\"code\",null,{\"children\":\"Promise/A+\"}],\" 规范，手写实现了一个自定义的 \",[\"$\",\"code\",null,{\"children\":\"XPromise\"}],\" ，大家可以仔细看一下代码\"]}],\"\\n\",[\"$\",\"$Lb\",null,{}],\"\\n\",\"$Lc\",\"\\n\",[\"$\",\"h3\",null,{\"id\":\"3-代码解读\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"3、\"}],\" 代码解读\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"首先，我们知道 Promise 的状态有两种情况，一种是有结果，一种是等待结果，因此，我们应该将等待中的任务，放入临时队列，将有结果的任务，放入执行队列，所以这个时候，我们需要在内部维护三个队列，其中两个临时队列，一个执行队列\"}],\"\\n\",\"$Ld\",\"\\n\",[\"$\",\"p\",null,{\"children\":\"需要注意的是，这几个队列并不属于某一个特定的 Promise 对象，它们是管理所有的 Promise 任务。因此我们在模块的全局中维护他们。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"进入到临时队列，表示该任务还不能被执行，还需要等待条件满足之后才能执行。进入到执行队列，则表示任务已经满足了执行条件，只需要在符合规定的时机执行即可。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"由于执行队列需要滞后于函数调用栈执行，因此，我们这里选择使用 \",[\"$\",\"code\",null,{\"children\":\"setTimeout\"}],\" 来模拟滞后执行的时机。我们把执行队列的执行称为 \",[\"$\",\"code\",null,{\"children\":\"workLoop\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"但是这里需要考虑的是，执行队列循环什么时候开始呢？理论上来说，应该是第一个 \",[\"$\",\"code\",null,{\"children\":\"resolve\"}],\" 执行时，而第二个 \",[\"$\",\"code\",null,{\"children\":\"resolve\"}],\" 时，则不需要重复启动 \",[\"$\",\"code\",null,{\"children\":\"workLoop\"}],\"，因此，我们需要管理一个全局的上下文变量 \",[\"$\",\"code\",null,{\"children\":\"loopRunning\"}],\" ，来记录 \",[\"$\",\"code\",null,{\"children\":\"workLoop\"}],\" 是否正在执行过程中\"]}],\"\\n\",\"$Le\",\"\\n\",[\"$\",\"p\",null,{\"children\":\"每个 Promise 都有两个内部值，一个表示状态，一个表示 Promise 的值\"}],\"\\n\",\"$Lf\",\"\\n\",[\"$\",\"p\",null,{\"children\":[\"构造函数传入的第一个参数中，支持 \",[\"$\",\"code\",null,{\"children\":\"resolve\"}],\" 与 \",[\"$\",\"code\",null,{\"children\":\"reject\"}],\" 作为参数。我们需要在内部单独处理他们。规则是：当 \",[\"$\",\"code\",null,{\"children\":\"resolve/reject\"}],\" 执行时，Promise 状态切换为结果态，并且将任务从对应的临时队列移除，并推送到执行队列，结合我们前面的逻辑，代码如下\"]}],\"\\n\",\"$L10\",\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"workLoop\"}],\" 的逻辑比较简单，我们只需利用 setTimeout 来滞后队列的循环，然后按照先进先出的逻辑清空队列即可。队列清空循环结束之后，需要将 \",[\"$\",\"code\",null,{\"children\":\"loopRunning\"}],\" 重置为 \",[\"$\",\"code\",null,{\"children\":\"false\"}]]}],\"\\n\",\"$L11\",\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\".then(() =\u003e {})\"}]}],\"  将任务推送到临时队列的逻辑稍微复杂一点。由于这里需要支持返回一个新的 Promise 对象，从而支持链式调用，并且还要将值传递给新 Promise 对象。因此，我们需要对传入的任务函数进行一层额外的包装。\"]}],\"\\n\",\"$L12\",\"\\n\",[\"$\",\"p\",null,{\"children\":[\"包装后的 \",[\"$\",\"code\",null,{\"children\":\"_resolved\"}],\" 作为真实的任务推送到临时队列中去，而我们在使用时定义的回调函数 \",[\"$\",\"code\",null,{\"children\":\"onResolved\"}],\" 则在 \",[\"$\",\"code\",null,{\"children\":\"_resolved\"}],\" 内部执行。并将其执行结果作为新 Promise 对象的 \",[\"$\",\"code\",null,{\"children\":\"resolve\"}],\" 参数传入。从而满足语法。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"正常情况下定义好的任务应该推送到临时队列中去\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"不过有一种情况是在定义回调函数 \",[\"$\",\"code\",null,{\"children\":\"onResolved\"}],\" 时， Promise 就已经有了状态，因此，这种情况下，我们要进行判断，将其直接推入到执行队列。\"]}],\"\\n\",\"$L13\",\"\\n\",[\"$\",\"h3\",null,{\"id\":\"4-总结\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"4、\"}],\" 总结\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"整个代码还是比较清晰易懂，核心的逻辑就是如何管理不同状态的任务，并且明确好任务推送进对应队列的时机，就很容易理解清楚了。这里的关键是我们利用 \",[\"$\",\"code\",null,{\"children\":\"loopRunning\"}],\" 记录了 \",[\"$\",\"code\",null,{\"children\":\"workLoop\"}],\" 的执行过程，从而让整个执行流程变得非常巧妙。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"相对而言，Promise 的逻辑会比前面 \",[\"$\",\"code\",null,{\"children\":\"setTimeout\"}],\" 的逻辑要复杂一点，大家可以多读几遍认真感受。\"]}]],null,[\"$\",\"$L14\",null,{\"children\":\"$L15\"}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"MMMD5t_C4GZm_uukezjpV\",{\"children\":[[\"$\",\"$L16\",null,{\"children\":\"$L17\"}],[\"$\",\"$L18\",null,{\"children\":\"$L19\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$1a\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"8:{}\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"div\",null,{\"className\":\"code-wrapper border my-4 border-gray-200 rounded overflow-hidden\",\"children\":[null,[\"$\",\"div\",null,{\"className\":\"code-base typescript\",\"children\":[false,[\"$\",\"pre\",null,{\"data-theme\":\"github-from-css\",\"data-lang\":\"typescript\",\"ref\":\"$undefined\",\"data-ch\":true,\"children\":[\"$\",\"div\",null,{\"style\":{\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"1,1\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[1,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"const\"}],\" \",[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"PromiseJobs\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"[]\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"2,2\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[2,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"3,3\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[3,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"let\"}],\" \",[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"job\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"4,4\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[4,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-1)\"},\"children\":\"// 将先进入队列的 job 移出队列，并执行\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"5,5\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[5,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"while\"}],\" \",[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(job\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"PromiseJobs.\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"shift\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"()) {\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"6,6\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[6,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"job\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"()\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"7,7\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[7,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}]],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}]]}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"d:[\"$\",\"div\",null,{\"className\":\"code-wrapper border my-4 border-gray-200 rounded overflow-hidden\",\"children\":[null,[\"$\",\"div\",null,{\"className\":\"code-base typescript\",\"children\":[false,[\"$\",\"pre\",null,{\"data-theme\":\"github-from-css\",\"data-lang\":\"typescript\",\"ref\":\"$undefined\",\"data-ch\":true,\"children\":[\"$\",\"div\",null,{\"style\":{\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"1,1\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[1,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-1)\"},\"children\":\"// 执行队列\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"2,2\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[2,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"const\"}],\" \",[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"promiseJobs\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"any\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"[]\"}],\" \",[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"[]\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"3,3\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[3,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"4,4\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[4,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-1)\"},\"children\":\"// 临时队列\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"5,5\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[5,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"let\"}],\" \",[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"PromiseFulfillReactions\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"{\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"key\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"any\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\",\"}],\" \",[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"callback\"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"any\"}],[\"$\",\"span\",\"16\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}[]\"}],\" \",[\"$\",\"span\",\"18\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"20\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"[]\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"6,6\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[6,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"let\"}],\" \",[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"PromiseRejectReactions\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"{\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"key\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"any\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\",\"}],\" \",[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"callback\"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"any\"}],[\"$\",\"span\",\"16\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}[]\"}],\" \",[\"$\",\"span\",\"18\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"20\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"[]\"}]],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}]]}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"div\",null,{\"className\":\"code-wrapper border my-4 border-gray-200 rounded overflow-hidden\",\"children\":[null,[\"$\",\"div\",null,{\"className\":\"code-base typescript\",\"children\":[false,[\"$\",\"pre\",null,{\"data-theme\":\"github-from-css\",\"data-lang\":\"typescript\",\"ref\":\"$undefined\",\"data-ch\":true,\"children\":[\"$\",\"div\",null,{\"style\":{\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"1,1\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[1,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-1)\"},\"children\":\"// 记录 workLoop 是否已经启动\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"2,2\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[2,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"let\"}],\" \",[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"loopRunning\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"false\"}]],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}]]}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"f:[\"$\",\"div\",null,{\"className\":\"code-wrapper border my-4 border-gray-200 rounded overflow-hidden\",\"children\":[null,[\"$\",\"div\",null,{\"className\":\"code-base typescript\",\"children\":[false,[\"$\",\"pre\",null,{\"data-theme\":\"github-from-css\",\"data-lang\":\"typescript\",\"ref\":\"$undefined\",\"data-ch\":true,\"children\":[\"$\",\"div\",null,{\"style\":{\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"1,1\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[1,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"export default class\"}],\" \",[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"XPromise {\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"2,2\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[2,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"private\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"PromiseState\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-8)\"},\"children\":\"'pending'\"}],\" \",[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"|\"}],\" \",[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"var(--ch-8)\"},\"children\":\"'fulfilled'\"}],\" \",[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"|\"}],\" \",[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"var(--ch-8)\"},\"children\":\"'rejected'\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"3,3\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[3,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"private\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"PromiseResult\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"any\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"4,4\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[4,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"constructor\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"executor\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"(\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"5,5\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[5,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"resolve\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"(value\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"any\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\")\"}],\" \",[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"void\"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\",\"}],\" \",\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"6,6\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[6,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"reject\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"(reason\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"?:\"}],\" \",[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"any\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\")\"}],\" \",[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"void\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"7,7\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[7,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\")\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"void\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\")\"}],\" \",[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"{\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"8,8\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[8,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\".PromiseResult\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"undefined\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"9,9\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[9,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\".PromiseState\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"pending\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"10,10\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[10,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"11,11\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[11,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"executor\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\".resolve.\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"bind\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"),\"}],\" \",[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\".resolve.\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"bind\"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(\"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"))\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"12,12\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[12,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"13,13\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[13,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"}\"}]],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}]]}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"10:[\"$\",\"div\",null,{\"className\":\"code-wrapper border my-4 border-gray-200 rounded overflow-hidden\",\"children\":[null,[\"$\",\"div\",null,{\"className\":\"code-base typescript\",\"children\":[false,[\"$\",\"pre\",null,{\"data-theme\":\"github-from-css\",\"data-lang\":\"typescript\",\"ref\":\"$undefined\",\"data-ch\":true,\"children\":[\"$\",\"div\",null,{\"style\":{\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"1,1\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[1,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"resolve\"}],\" \",[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"value\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\":\"}],\" \",[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"any\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\")\"}],\" \",[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"{\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"2,2\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[2,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-1)\"},\"children\":\"// 推送到执行队列，或者启动执行队列的循环\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"3,3\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[3,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\".PromiseResult\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"value\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"4,4\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[4,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\".PromiseState\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"fulfilled\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"5,5\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[5,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"6,6\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[6,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"const\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"job\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"PromiseFulfillReactions.\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"find\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"((\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"item\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\")\"}],\" \",[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"item.key\"}],\" \",[\"$\",\"span\",\"17\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"===\"}],\" \",[\"$\",\"span\",\"19\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"20\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\")\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"7,7\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[7,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"if\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(job) {\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"8,8\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[8,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"PromiseFulfillReactions\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"PromiseFulfillReactions.\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"filter\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"item\"}],\" \",[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"item.key\"}],\" \",[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"!==\"}],\" \",[\"$\",\"span\",\"16\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"17\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\")\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"9,9\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[9,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"promiseJobs.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"push\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(job.callback)\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"10,10\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[10,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"11,11\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[11,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-1)\"},\"children\":\"// 如果 workLoop 没有启动，则启动 workLoop\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"12,12\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[12,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"if\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(loopRunning\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"===\"}],\" \",[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"false\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\") {\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"13,13\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[13,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"loopRunning\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"true\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"14,14\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[14,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"workLoop\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"()\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"15,15\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[15,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"16,16\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[16,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}]],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}]]}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"11:[\"$\",\"div\",null,{\"className\":\"code-wrapper border my-4 border-gray-200 rounded overflow-hidden\",\"children\":[null,[\"$\",\"div\",null,{\"className\":\"code-base typescript\",\"children\":[false,[\"$\",\"pre\",null,{\"data-theme\":\"github-from-css\",\"data-lang\":\"typescript\",\"ref\":\"$undefined\",\"data-ch\":true,\"children\":[\"$\",\"div\",null,{\"style\":{\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"1,1\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[1,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"workLoop\"}],\" \",[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"()\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"{\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"2,2\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[2,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"setTimeout\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(()\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"{\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"3,3\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[3,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"let\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"cb\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"4,4\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[4,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"while\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(cb\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"promiseJobs.\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"shift\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"()) {\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"5,5\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[5,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"      \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"cb\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"()\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"6,6\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[6,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"7,7\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[7,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"loopRunning\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"false\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"8,8\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[8,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"},\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"0\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\")\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"9,9\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[9,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}]],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}]]}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"12:[\"$\",\"div\",null,{\"className\":\"code-wrapper border my-4 border-gray-200 rounded overflow-hidden\",\"children\":[null,[\"$\",\"div\",null,{\"className\":\"code-base typescript\",\"children\":[false,[\"$\",\"pre\",null,{\"data-theme\":\"github-from-css\",\"data-lang\":\"typescript\",\"ref\":\"$undefined\",\"data-ch\":true,\"children\":[\"$\",\"div\",null,{\"style\":{\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"1,1\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[1,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"const\"}],\" \",[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"_resolved\"}],\" \",[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"()\"}],\" \",[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"{\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"2,2\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[2,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"const\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"value\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\".PromiseResult\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"3,3\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[3,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"try\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"{\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"4,4\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[4,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"if\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"!\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"isFunction\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(onResolved)) {\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"5,5\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[5,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"      \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"resolveNext\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(value)\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"6,6\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[6,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"else\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"{\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"7,7\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[7,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"      \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"const\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"res\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"=\"}],\" \",[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"onResolved\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(value)\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"8,8\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[8,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"      \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"if\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(res\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"instanceof\"}],\" \",[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"var(--ch-3)\"},\"children\":\"XPromise\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\") {\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"9,9\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[9,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"        \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"res.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"then\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(resolveNext, rejectNext)\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"10,10\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[10,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"      \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"else\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"{\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"11,11\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[11,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"        \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"resolveNext\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(res)\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"12,12\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[12,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"      \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}],\"  \",\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"13,13\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[13,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"14,14\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[14,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"catch\"}],\" \",[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(err) {\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"15,15\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[15,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"rejectNext\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(err)\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"16,16\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[16,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"17,17\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[17,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}]],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}]]}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"13:[\"$\",\"div\",null,{\"className\":\"code-wrapper border my-4 border-gray-200 rounded overflow-hidden\",\"children\":[null,[\"$\",\"div\",null,{\"className\":\"code-base typescript\",\"children\":[false,[\"$\",\"pre\",null,{\"data-theme\":\"github-from-css\",\"data-lang\":\"typescript\",\"ref\":\"$undefined\",\"data-ch\":true,\"children\":[\"$\",\"div\",null,{\"style\":{\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"1,1\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[1,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"switch\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\".PromiseState) {\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"2,2\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[2,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-1)\"},\"children\":\"// 状态为 pending 时，收集回调\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"3,3\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[3,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"case\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"pending:\"}],\" \",\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"4,4\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[4,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"PromiseFulfillReactions.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"push\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"({\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"5,5\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[5,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"      \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"key:\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\",\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"6,6\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[6,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"      \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"callback: _resolved\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"7,7\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[7,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"})\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"8,8\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[8,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"PromiseRejectReactions.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"push\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"({\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"9,9\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[9,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"0\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"      \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"key:\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-2)\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\",\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"10,10\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[10,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"      \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"callback: _rejected\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"11,11\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[11,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"})\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"12,12\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[12,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"break\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"13,13\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[13,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-1)\"},\"children\":\"// 状态已经改变了，就直接执行回调\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"14,14\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[14,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"case\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"fulfilled:\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"15,15\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[15,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"promiseJobs.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"push\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(_resolved)\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"16,16\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[16,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"break\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"17,17\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[17,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"  \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"case\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"rejected:\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"18,18\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[18,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"promiseJobs.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"var(--ch-5)\"},\"children\":\"push\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"(_rejected)\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"19,19\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[19,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"    \",[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"var(--ch-7)\"},\"children\":\"break\"}],\"\\n\"],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}],[\"$\",\"div\",\"20,20\",{\"style\":{\"borderLeft\":\"solid 2px transparent\",\"borderLeftColor\":\"$undefined\",\"backgroundColor\":\"$undefined\"},\"className\":\"flex\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"line-number px-4 text-gray-400 text-xs select-none\",\"children\":[\"$\",\"span\",null,{\"children\":[20,[\"$\",\"span\",null,{\"className\":\"invisible\",\"children\":\"\"}]]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"var(--ch-4)\"},\"children\":\"}\"}]],\"className\":\"px-2 flex-1 flex-1 pl-2\"}]]}]}]]}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"1b:I[34034,[\"7525\",\"static/chunks/7525-411280bffc37a107.js\",\"4320\",\"static/chunks/4320-eb0b4108191194bc.js\",\"5926\",\"static/chunks/5926-2f921190ce1e6581.js\",\"2794\",\"static/chunks/2794-e7741df2722cee1f.js\",\"8424\",\"static/chunks/app/reactprinciple/(0.eventloop)/6.promise/page-6ea2b695323b3491.js\"],\"default\"]\n1c:I[65470,[\"7525\",\"static/chunks/7525-411280bffc37a107.js\",\"4320\",\"static/chunks/4320-eb0b4108191194bc.js\",\"5926\",\"static/chunks/5926-2f921190ce1e6581.js\",\"2794\",\"static/chunks/2794-e7741df2722cee1f.js\",\"8424\",\"static/chunks/app/reactprinciple/(0.eventloop)/6.promise/page-6ea2b695323b3491.js\"],\"CodeTabHeader\"]\n1e:I[65703,[\"7525\",\"static/chunks/7525-411280bffc37a107.js\",\"4320\",\"static/chunks/4320-eb0b4108191194bc.js\",\"5926\",\"static/chunks/5926-2f921190ce1e6581.js\",\"2794\",\"static/chunks/2794-e7741df2722cee1f.js\",\"8424\",\"static/chunks/app/reactprinciple/(0.eventloop)/6.promise/page-6ea2b695323b3491.js\"],\"CodeTabsInner\"]\n1d:Td41,"])</script><script>self.__next_f.push([1,"const pending = 'pending'\nconst fulfilled = 'fulfilled'\nconst rejected = 'rejected'\n\nlet loopRunning = false\n\nconst promiseJobs: any[] = []\n\nlet PromiseFulfillReactions: {key: any, callback: any}[] = []\nlet PromiseRejectReactions: {key: any, callback: any}[] = []\n\nconst isFunction = (fn: any) =\u003e typeof fn === 'function'\n\nexport default class XPromise {\n  private PromiseState: 'pending' | 'fulfilled' | 'rejected'\n  private PromiseResult: any\n  constructor(executor: (\n    resolve: (value: any) =\u003e void, \n    reject: (reason?: any) =\u003e void\n  ) =\u003e void) {\n    this.PromiseResult = undefined\n    this.PromiseState = pending\n\n    executor(this.resolve.bind(this), this.reject.bind(this))\n  }\n\n  resolve = (value: any) =\u003e {\n    // 推送到执行队列，或者启动执行队列的循环\n    this.PromiseResult = value\n    this.PromiseState = fulfilled\n\n    const job = PromiseFulfillReactions.find((item) =\u003e item.key === this)\n    if (job) {\n      PromiseFulfillReactions = PromiseFulfillReactions.filter(item =\u003e item.key !== this)\n      promiseJobs.push(job.callback)\n    }\n    if (loopRunning === false) {\n      loopRunning = true\n      this.workLoop()\n    }\n  }\n\n  reject(value: any) {\n    this.PromiseResult = value\n    this.PromiseState = rejected\n    const job = PromiseRejectReactions.find(item =\u003e item.key === this)\n    \n    if (job) {\n      PromiseRejectReactions = PromiseRejectReactions.filter(item =\u003e item.key !== this)\n      promiseJobs.push(job.callback)\n    }\n    if (loopRunning === false) {\n      loopRunning = true\n      this.workLoop()\n    }\n  }\n\n  then = (onResolved: any, onRejected?: any) =\u003e {\n    return new XPromise((resolveNext, rejectNext) =\u003e {\n      const _resolved = () =\u003e {\n        const value = this.PromiseResult\n        try {\n          if (!isFunction(onResolved)) {\n            resolveNext(value)\n          } else {\n            const res = onResolved(value)\n            if (res instanceof XPromise) {\n              res.then(resolveNext, rejectNext)\n            } else {\n              resolveNext(res)\n            }  \n          }\n        } catch (err) {\n          rejectNext(err)\n        }\n      }\n\n      const _rejected = () =\u003e {\n        const value = this.PromiseResult\n        try {\n          if (!isFunction(onRejected)) {\n            rejectNext(value)\n          } else {\n            const res = onRejected(value)\n            if (res instanceof XPromise) {\n              res.then(resolveNext, rejectNext)\n            } else {\n              resolveNext(res)\n            }\n          }\n        } catch (err) {\n          rejectNext(err)\n        }\n      }\n      switch(this.PromiseState) {\n        // 状态为 pending 时，收集回调\n        case pending: \n          PromiseFulfillReactions.push({\n            key: this,\n            callback: _resolved\n          })\n          PromiseRejectReactions.push({\n            key: this,\n            callback: _rejected\n          })\n          break\n        // 状态已经改变了，就直接执行回调\n        case fulfilled:\n          promiseJobs.push(_resolved)\n          break\n        case rejected:\n          promiseJobs.push(_rejected)\n          break\n      }\n    })\n  }\n\n  workLoop = () =\u003e {\n    setTimeout(() =\u003e {\n      let cb\n      while(cb = promiseJobs.shift()) {\n        cb()\n      }\n      loopRunning = false\n    }, 0)\n  }\n\n  catch = (onRejected: any) =\u003e {\n    return this.then(null, onRejected)\n  }\n}"])</script><script>self.__next_f.push([1,"1f:Td41,"])</script><script>self.__next_f.push([1,"const pending = 'pending'\nconst fulfilled = 'fulfilled'\nconst rejected = 'rejected'\n\nlet loopRunning = false\n\nconst promiseJobs: any[] = []\n\nlet PromiseFulfillReactions: {key: any, callback: any}[] = []\nlet PromiseRejectReactions: {key: any, callback: any}[] = []\n\nconst isFunction = (fn: any) =\u003e typeof fn === 'function'\n\nexport default class XPromise {\n  private PromiseState: 'pending' | 'fulfilled' | 'rejected'\n  private PromiseResult: any\n  constructor(executor: (\n    resolve: (value: any) =\u003e void, \n    reject: (reason?: any) =\u003e void\n  ) =\u003e void) {\n    this.PromiseResult = undefined\n    this.PromiseState = pending\n\n    executor(this.resolve.bind(this), this.reject.bind(this))\n  }\n\n  resolve = (value: any) =\u003e {\n    // 推送到执行队列，或者启动执行队列的循环\n    this.PromiseResult = value\n    this.PromiseState = fulfilled\n\n    const job = PromiseFulfillReactions.find((item) =\u003e item.key === this)\n    if (job) {\n      PromiseFulfillReactions = PromiseFulfillReactions.filter(item =\u003e item.key !== this)\n      promiseJobs.push(job.callback)\n    }\n    if (loopRunning === false) {\n      loopRunning = true\n      this.workLoop()\n    }\n  }\n\n  reject(value: any) {\n    this.PromiseResult = value\n    this.PromiseState = rejected\n    const job = PromiseRejectReactions.find(item =\u003e item.key === this)\n    \n    if (job) {\n      PromiseRejectReactions = PromiseRejectReactions.filter(item =\u003e item.key !== this)\n      promiseJobs.push(job.callback)\n    }\n    if (loopRunning === false) {\n      loopRunning = true\n      this.workLoop()\n    }\n  }\n\n  then = (onResolved: any, onRejected?: any) =\u003e {\n    return new XPromise((resolveNext, rejectNext) =\u003e {\n      const _resolved = () =\u003e {\n        const value = this.PromiseResult\n        try {\n          if (!isFunction(onResolved)) {\n            resolveNext(value)\n          } else {\n            const res = onResolved(value)\n            if (res instanceof XPromise) {\n              res.then(resolveNext, rejectNext)\n            } else {\n              resolveNext(res)\n            }  \n          }\n        } catch (err) {\n          rejectNext(err)\n        }\n      }\n\n      const _rejected = () =\u003e {\n        const value = this.PromiseResult\n        try {\n          if (!isFunction(onRejected)) {\n            rejectNext(value)\n          } else {\n            const res = onRejected(value)\n            if (res instanceof XPromise) {\n              res.then(resolveNext, rejectNext)\n            } else {\n              resolveNext(res)\n            }\n          }\n        } catch (err) {\n          rejectNext(err)\n        }\n      }\n      switch(this.PromiseState) {\n        // 状态为 pending 时，收集回调\n        case pending: \n          PromiseFulfillReactions.push({\n            key: this,\n            callback: _resolved\n          })\n          PromiseRejectReactions.push({\n            key: this,\n            callback: _rejected\n          })\n          break\n        // 状态已经改变了，就直接执行回调\n        case fulfilled:\n          promiseJobs.push(_resolved)\n          break\n        case rejected:\n          promiseJobs.push(_rejected)\n          break\n      }\n    })\n  }\n\n  workLoop = () =\u003e {\n    setTimeout(() =\u003e {\n      let cb\n      while(cb = promiseJobs.shift()) {\n        cb()\n      }\n      loopRunning = false\n    }, 0)\n  }\n\n  catch = (onRejected: any) =\u003e {\n    return this.then(null, onRejected)\n  }\n}"])</script><script>self.__next_f.push([1,"20:Td41,"])</script><script>self.__next_f.push([1,"const pending = 'pending'\nconst fulfilled = 'fulfilled'\nconst rejected = 'rejected'\n\nlet loopRunning = false\n\nconst promiseJobs: any[] = []\n\nlet PromiseFulfillReactions: {key: any, callback: any}[] = []\nlet PromiseRejectReactions: {key: any, callback: any}[] = []\n\nconst isFunction = (fn: any) =\u003e typeof fn === 'function'\n\nexport default class XPromise {\n  private PromiseState: 'pending' | 'fulfilled' | 'rejected'\n  private PromiseResult: any\n  constructor(executor: (\n    resolve: (value: any) =\u003e void, \n    reject: (reason?: any) =\u003e void\n  ) =\u003e void) {\n    this.PromiseResult = undefined\n    this.PromiseState = pending\n\n    executor(this.resolve.bind(this), this.reject.bind(this))\n  }\n\n  resolve = (value: any) =\u003e {\n    // 推送到执行队列，或者启动执行队列的循环\n    this.PromiseResult = value\n    this.PromiseState = fulfilled\n\n    const job = PromiseFulfillReactions.find((item) =\u003e item.key === this)\n    if (job) {\n      PromiseFulfillReactions = PromiseFulfillReactions.filter(item =\u003e item.key !== this)\n      promiseJobs.push(job.callback)\n    }\n    if (loopRunning === false) {\n      loopRunning = true\n      this.workLoop()\n    }\n  }\n\n  reject(value: any) {\n    this.PromiseResult = value\n    this.PromiseState = rejected\n    const job = PromiseRejectReactions.find(item =\u003e item.key === this)\n    \n    if (job) {\n      PromiseRejectReactions = PromiseRejectReactions.filter(item =\u003e item.key !== this)\n      promiseJobs.push(job.callback)\n    }\n    if (loopRunning === false) {\n      loopRunning = true\n      this.workLoop()\n    }\n  }\n\n  then = (onResolved: any, onRejected?: any) =\u003e {\n    return new XPromise((resolveNext, rejectNext) =\u003e {\n      const _resolved = () =\u003e {\n        const value = this.PromiseResult\n        try {\n          if (!isFunction(onResolved)) {\n            resolveNext(value)\n          } else {\n            const res = onResolved(value)\n            if (res instanceof XPromise) {\n              res.then(resolveNext, rejectNext)\n            } else {\n              resolveNext(res)\n            }  \n          }\n        } catch (err) {\n          rejectNext(err)\n        }\n      }\n\n      const _rejected = () =\u003e {\n        const value = this.PromiseResult\n        try {\n          if (!isFunction(onRejected)) {\n            rejectNext(value)\n          } else {\n            const res = onRejected(value)\n            if (res instanceof XPromise) {\n              res.then(resolveNext, rejectNext)\n            } else {\n              resolveNext(res)\n            }\n          }\n        } catch (err) {\n          rejectNext(err)\n        }\n      }\n      switch(this.PromiseState) {\n        // 状态为 pending 时，收集回调\n        case pending: \n          PromiseFulfillReactions.push({\n            key: this,\n            callback: _resolved\n          })\n          PromiseRejectReactions.push({\n            key: this,\n            callback: _rejected\n          })\n          break\n        // 状态已经改变了，就直接执行回调\n        case fulfilled:\n          promiseJobs.push(_resolved)\n          break\n        case rejected:\n          promiseJobs.push(_rejected)\n          break\n      }\n    })\n  }\n\n  workLoop = () =\u003e {\n    setTimeout(() =\u003e {\n      let cb\n      while(cb = promiseJobs.shift()) {\n        cb()\n      }\n      loopRunning = false\n    }, 0)\n  }\n\n  catch = (onRejected: any) =\u003e {\n    return this.then(null, onRejected)\n  }\n}"])</script><script>self.__next_f.push([1,"c:[\"$\",\"div\",null,{\"className\":\"code-tabs border rounded border-gray-200 overflow-hidden my-5\",\"children\":[\"$\",\"$L1b\",null,{\"children\":[[\"$\",\"$L1c\",null,{\"tabs\":[{\"meta\":\"index.tsx -c\",\"value\":\"import Button from 'components/ui/button'\\nimport XPromise from './promise'\\n\\nexport default function Counter() {\\n  function __click() {\\n    new XPromise((resolve) =\u003e {\\n      setTimeout(() =\u003e {\\n        resolve('hello xpromise')\\n      }, 1000)\\n    }).then((value: any) =\u003e {\\n      console.log('5. Value: ', value)\\n    }).then(() =\u003e {\\n      console.log('6')\\n    })\\n\\n    new XPromise(resolve =\u003e {\\n      resolve('')\\n    }).then(() =\u003e {\\n      console.log('1')\\n      new XPromise(resolve =\u003e {\\n        resolve('')\\n      }).then(() =\u003e {\\n        console.log('2')\\n      }).then(() =\u003e {\\n        console.log('4')\\n      })\\n    }).then(() =\u003e {\\n      console.log('3')\\n    })\\n\\n    console.log('0')\\n  }\\n  return (\\n    \u003cdiv className=''\u003e\\n      \u003cButton onClick={__click}\u003e执行 XPromise 任务\u003c/Button\u003e\\n    \u003c/div\u003e\\n  )\\n}\",\"lang\":\"tsx\"},{\"meta\":\"promise.ts -c\",\"value\":\"$1d\",\"lang\":\"tsx\"}]}],[\"$\",\"$L1e\",null,{\"highlighteds\":[{\"meta\":\"index.tsx -c\",\"value\":\"import Button from 'components/ui/button'\\nimport XPromise from './promise'\\n\\nexport default function Counter() {\\n  function __click() {\\n    new XPromise((resolve) =\u003e {\\n      setTimeout(() =\u003e {\\n        resolve('hello xpromise')\\n      }, 1000)\\n    }).then((value: any) =\u003e {\\n      console.log('5. Value: ', value)\\n    }).then(() =\u003e {\\n      console.log('6')\\n    })\\n\\n    new XPromise(resolve =\u003e {\\n      resolve('')\\n    }).then(() =\u003e {\\n      console.log('1')\\n      new XPromise(resolve =\u003e {\\n        resolve('')\\n      }).then(() =\u003e {\\n        console.log('2')\\n      }).then(() =\u003e {\\n        console.log('4')\\n      })\\n    }).then(() =\u003e {\\n      console.log('3')\\n    })\\n\\n    console.log('0')\\n  }\\n  return (\\n    \u003cdiv className=''\u003e\\n      \u003cButton onClick={__click}\u003e执行 XPromise 任务\u003c/Button\u003e\\n    \u003c/div\u003e\\n  )\\n}\",\"lang\":\"tsx\",\"code\":\"import Button from 'components/ui/button'\\nimport XPromise from './promise'\\n\\nexport default function Counter() {\\n  function __click() {\\n    new XPromise((resolve) =\u003e {\\n      setTimeout(() =\u003e {\\n        resolve('hello xpromise')\\n      }, 1000)\\n    }).then((value: any) =\u003e {\\n      console.log('5. Value: ', value)\\n    }).then(() =\u003e {\\n      console.log('6')\\n    })\\n\\n    new XPromise(resolve =\u003e {\\n      resolve('')\\n    }).then(() =\u003e {\\n      console.log('1')\\n      new XPromise(resolve =\u003e {\\n        resolve('')\\n      }).then(() =\u003e {\\n        console.log('2')\\n      }).then(() =\u003e {\\n        console.log('4')\\n      })\\n    }).then(() =\u003e {\\n      console.log('3')\\n    })\\n\\n    console.log('0')\\n  }\\n  return (\\n    \u003cdiv className=''\u003e\\n      \u003cButton onClick={__click}\u003e执行 XPromise 任务\u003c/Button\u003e\\n    \u003c/div\u003e\\n  )\\n}\",\"tokens\":[[\"import\",\"var(--ch-7)\"],\" \",[\"Button\",\"var(--ch-4)\"],\" \",[\"from\",\"var(--ch-7)\"],\" \",[\"'components/ui/button'\",\"var(--ch-8)\"],\"\\n\",[\"import\",\"var(--ch-7)\"],\" \",[\"XPromise\",\"var(--ch-4)\"],\" \",[\"from\",\"var(--ch-7)\"],\" \",[\"'./promise'\",\"var(--ch-8)\"],\"\\n\\n\",[\"export default function\",\"var(--ch-7)\"],\" \",[\"Counter\",\"var(--ch-5)\"],[\"()\",\"var(--ch-3)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n  \",[\"function\",\"var(--ch-7)\"],\" \",[\"__click\",\"var(--ch-5)\"],[\"() {\",\"var(--ch-4)\"],\"\\n    \",[\"new\",\"var(--ch-7)\"],\" \",[\"XPromise\",\"var(--ch-5)\"],[\"((\",\"var(--ch-4)\"],[\"resolve\",\"var(--ch-3)\"],[\")\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n      \",[\"setTimeout\",\"var(--ch-5)\"],[\"(()\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n        \",[\"resolve\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"'hello xpromise'\",\"var(--ch-8)\"],[\")\",\"var(--ch-4)\"],\"\\n      \",[\"},\",\"var(--ch-4)\"],\" \",[\"1000\",\"var(--ch-2)\"],[\")\",\"var(--ch-4)\"],\"\\n    \",[\"}).\",\"var(--ch-4)\"],[\"then\",\"var(--ch-5)\"],[\"((\",\"var(--ch-4)\"],[\"value\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\")\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n      \",[\"console.\",\"var(--ch-4)\"],[\"log\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"'5. Value: '\",\"var(--ch-8)\"],[\", value)\",\"var(--ch-4)\"],\"\\n    \",[\"}).\",\"var(--ch-4)\"],[\"then\",\"var(--ch-5)\"],[\"(()\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n      \",[\"console.\",\"var(--ch-4)\"],[\"log\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"'6'\",\"var(--ch-8)\"],[\")\",\"var(--ch-4)\"],\"\\n    \",[\"})\",\"var(--ch-4)\"],\"\\n\\n    \",[\"new\",\"var(--ch-7)\"],\" \",[\"XPromise\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"resolve\",\"var(--ch-3)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n      \",[\"resolve\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"''\",\"var(--ch-8)\"],[\")\",\"var(--ch-4)\"],\"\\n    \",[\"}).\",\"var(--ch-4)\"],[\"then\",\"var(--ch-5)\"],[\"(()\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n      \",[\"console.\",\"var(--ch-4)\"],[\"log\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"'1'\",\"var(--ch-8)\"],[\")\",\"var(--ch-4)\"],\"\\n      \",[\"new\",\"var(--ch-7)\"],\" \",[\"XPromise\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"resolve\",\"var(--ch-3)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n        \",[\"resolve\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"''\",\"var(--ch-8)\"],[\")\",\"var(--ch-4)\"],\"\\n      \",[\"}).\",\"var(--ch-4)\"],[\"then\",\"var(--ch-5)\"],[\"(()\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n        \",[\"console.\",\"var(--ch-4)\"],[\"log\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"'2'\",\"var(--ch-8)\"],[\")\",\"var(--ch-4)\"],\"\\n      \",[\"}).\",\"var(--ch-4)\"],[\"then\",\"var(--ch-5)\"],[\"(()\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n        \",[\"console.\",\"var(--ch-4)\"],[\"log\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"'4'\",\"var(--ch-8)\"],[\")\",\"var(--ch-4)\"],\"\\n      \",[\"})\",\"var(--ch-4)\"],\"\\n    \",[\"}).\",\"var(--ch-4)\"],[\"then\",\"var(--ch-5)\"],[\"(()\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n      \",[\"console.\",\"var(--ch-4)\"],[\"log\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"'3'\",\"var(--ch-8)\"],[\")\",\"var(--ch-4)\"],\"\\n    \",[\"})\",\"var(--ch-4)\"],\"\\n\\n    \",[\"console.\",\"var(--ch-4)\"],[\"log\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"'0'\",\"var(--ch-8)\"],[\")\",\"var(--ch-4)\"],\"\\n  \",[\"}\",\"var(--ch-4)\"],\"\\n  \",[\"return\",\"var(--ch-7)\"],\" \",[\"(\",\"var(--ch-4)\"],\"\\n    \",[\"\u003c\",\"var(--ch-4)\"],[\"div\",\"var(--ch-6)\"],\" \",[\"className\",\"var(--ch-2)\"],[\"=\",\"var(--ch-7)\"],[\"''\",\"var(--ch-8)\"],[\"\u003e\",\"var(--ch-4)\"],\"\\n      \",[\"\u003c\",\"var(--ch-4)\"],[\"Button\",\"var(--ch-6)\"],\" \",[\"onClick\",\"var(--ch-2)\"],[\"={\",\"var(--ch-7)\"],[\"__click\",\"var(--ch-4)\"],[\"}\",\"var(--ch-7)\"],[\"\u003e执行 XPromise 任务\u003c/\",\"var(--ch-4)\"],[\"Button\",\"var(--ch-6)\"],[\"\u003e\",\"var(--ch-4)\"],\"\\n    \",[\"\u003c/\",\"var(--ch-4)\"],[\"div\",\"var(--ch-6)\"],[\"\u003e\",\"var(--ch-4)\"],\"\\n  \",[\")\",\"var(--ch-4)\"],\"\\n\",[\"}\",\"var(--ch-4)\"]],\"annotations\":[],\"themeName\":\"github-from-css\",\"style\":{\"color\":\"var(--ch-4)\",\"background\":\"var(--ch-16)\",\"colorScheme\":\"var(--ch-0)\"}},{\"meta\":\"promise.ts -c\",\"value\":\"$1f\",\"lang\":\"tsx\",\"code\":\"$20\",\"tokens\":[[\"const\",\"var(--ch-7)\"],\" \",[\"pending\",\"var(--ch-2)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"'pending'\",\"var(--ch-8)\"],\"\\n\",[\"const\",\"var(--ch-7)\"],\" \",[\"fulfilled\",\"var(--ch-2)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"'fulfilled'\",\"var(--ch-8)\"],\"\\n\",[\"const\",\"var(--ch-7)\"],\" \",[\"rejected\",\"var(--ch-2)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"'rejected'\",\"var(--ch-8)\"],\"\\n\\n\",[\"let\",\"var(--ch-7)\"],\" \",[\"loopRunning\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"false\",\"var(--ch-2)\"],\"\\n\\n\",[\"const\",\"var(--ch-7)\"],\" \",[\"promiseJobs\",\"var(--ch-2)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\"[]\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"[]\",\"var(--ch-4)\"],\"\\n\\n\",[\"let\",\"var(--ch-7)\"],\" \",[\"PromiseFulfillReactions\",\"var(--ch-4)\"],[\":\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],[\"key\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\",\",\"var(--ch-4)\"],\" \",[\"callback\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\"}[]\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"[]\",\"var(--ch-4)\"],\"\\n\",[\"let\",\"var(--ch-7)\"],\" \",[\"PromiseRejectReactions\",\"var(--ch-4)\"],[\":\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],[\"key\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\",\",\"var(--ch-4)\"],\" \",[\"callback\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\"}[]\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"[]\",\"var(--ch-4)\"],\"\\n\\n\",[\"const\",\"var(--ch-7)\"],\" \",[\"isFunction\",\"var(--ch-5)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"(\",\"var(--ch-4)\"],[\"fn\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\")\",\"var(--ch-4)\"],\" \",[\"=\u003e typeof\",\"var(--ch-7)\"],\" \",[\"fn\",\"var(--ch-4)\"],\" \",[\"===\",\"var(--ch-7)\"],\" \",[\"'function'\",\"var(--ch-8)\"],\"\\n\\n\",[\"export default class\",\"var(--ch-7)\"],\" \",[\"XPromise {\",\"var(--ch-3)\"],\"\\n  \",[\"private\",\"var(--ch-7)\"],\" \",[\"PromiseState\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"'pending'\",\"var(--ch-8)\"],\" \",[\"|\",\"var(--ch-7)\"],\" \",[\"'fulfilled'\",\"var(--ch-8)\"],\" \",[\"|\",\"var(--ch-7)\"],\" \",[\"'rejected'\",\"var(--ch-8)\"],\"\\n  \",[\"private\",\"var(--ch-7)\"],\" \",[\"PromiseResult\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],\"\\n  \",[\"constructor\",\"var(--ch-7)\"],[\"(\",\"var(--ch-3)\"],[\"executor\",\"var(--ch-5)\"],[\":\",\"var(--ch-7)\"],\" \",[\"(\",\"var(--ch-3)\"],\"\\n    \",[\"resolve\",\"var(--ch-5)\"],[\":\",\"var(--ch-7)\"],\" \",[\"(value\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\")\",\"var(--ch-3)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"void\",\"var(--ch-2)\"],[\",\",\"var(--ch-3)\"],\" \\n    \",[\"reject\",\"var(--ch-5)\"],[\":\",\"var(--ch-7)\"],\" \",[\"(reason\",\"var(--ch-3)\"],[\"?:\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\")\",\"var(--ch-3)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"void\",\"var(--ch-2)\"],\"\\n  \",[\")\",\"var(--ch-3)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"void\",\"var(--ch-2)\"],[\")\",\"var(--ch-3)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n    \",[\"this\",\"var(--ch-2)\"],[\".PromiseResult\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"undefined\",\"var(--ch-2)\"],\"\\n    \",[\"this\",\"var(--ch-2)\"],[\".PromiseState\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"pending\",\"var(--ch-4)\"],\"\\n\\n    \",[\"executor\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"this\",\"var(--ch-2)\"],[\".resolve.\",\"var(--ch-4)\"],[\"bind\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"this\",\"var(--ch-2)\"],[\"),\",\"var(--ch-4)\"],\" \",[\"this\",\"var(--ch-2)\"],[\".reject.\",\"var(--ch-4)\"],[\"bind\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"this\",\"var(--ch-2)\"],[\"))\",\"var(--ch-4)\"],\"\\n  \",[\"}\",\"var(--ch-4)\"],\"\\n\\n  \",[\"resolve\",\"var(--ch-5)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"(value\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\")\",\"var(--ch-3)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n    \",[\"// 推送到执行队列，或者启动执行队列的循环\",\"var(--ch-1)\"],\"\\n    \",[\"this\",\"var(--ch-2)\"],[\".PromiseResult\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"value\",\"var(--ch-4)\"],\"\\n    \",[\"this\",\"var(--ch-2)\"],[\".PromiseState\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"fulfilled\",\"var(--ch-4)\"],\"\\n\\n    \",[\"const\",\"var(--ch-7)\"],\" \",[\"job\",\"var(--ch-2)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"PromiseFulfillReactions.\",\"var(--ch-4)\"],[\"find\",\"var(--ch-5)\"],[\"((\",\"var(--ch-4)\"],[\"item\",\"var(--ch-3)\"],[\")\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"item.key\",\"var(--ch-4)\"],\" \",[\"===\",\"var(--ch-7)\"],\" \",[\"this\",\"var(--ch-2)\"],[\")\",\"var(--ch-4)\"],\"\\n    \",[\"if\",\"var(--ch-7)\"],\" \",[\"(job) {\",\"var(--ch-4)\"],\"\\n      \",[\"PromiseFulfillReactions\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"PromiseFulfillReactions.\",\"var(--ch-4)\"],[\"filter\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"item\",\"var(--ch-3)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"item.key\",\"var(--ch-4)\"],\" \",[\"!==\",\"var(--ch-7)\"],\" \",[\"this\",\"var(--ch-2)\"],[\")\",\"var(--ch-4)\"],\"\\n      \",[\"promiseJobs.\",\"var(--ch-4)\"],[\"push\",\"var(--ch-5)\"],[\"(job.callback)\",\"var(--ch-4)\"],\"\\n    \",[\"}\",\"var(--ch-4)\"],\"\\n    \",[\"if\",\"var(--ch-7)\"],\" \",[\"(loopRunning\",\"var(--ch-4)\"],\" \",[\"===\",\"var(--ch-7)\"],\" \",[\"false\",\"var(--ch-2)\"],[\") {\",\"var(--ch-4)\"],\"\\n      \",[\"loopRunning\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"true\",\"var(--ch-2)\"],\"\\n      \",[\"this\",\"var(--ch-2)\"],[\".\",\"var(--ch-4)\"],[\"workLoop\",\"var(--ch-5)\"],[\"()\",\"var(--ch-4)\"],\"\\n    \",[\"}\",\"var(--ch-4)\"],\"\\n  \",[\"}\",\"var(--ch-4)\"],\"\\n\\n  \",[\"reject\",\"var(--ch-5)\"],[\"(value\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\")\",\"var(--ch-3)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n    \",[\"this\",\"var(--ch-2)\"],[\".PromiseResult\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"value\",\"var(--ch-4)\"],\"\\n    \",[\"this\",\"var(--ch-2)\"],[\".PromiseState\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"rejected\",\"var(--ch-4)\"],\"\\n    \",[\"const\",\"var(--ch-7)\"],\" \",[\"job\",\"var(--ch-2)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"PromiseRejectReactions.\",\"var(--ch-4)\"],[\"find\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"item\",\"var(--ch-3)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"item.key\",\"var(--ch-4)\"],\" \",[\"===\",\"var(--ch-7)\"],\" \",[\"this\",\"var(--ch-2)\"],[\")\",\"var(--ch-4)\"],\"\\n    \\n    \",[\"if\",\"var(--ch-7)\"],\" \",[\"(job) {\",\"var(--ch-4)\"],\"\\n      \",[\"PromiseRejectReactions\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"PromiseRejectReactions.\",\"var(--ch-4)\"],[\"filter\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"item\",\"var(--ch-3)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"item.key\",\"var(--ch-4)\"],\" \",[\"!==\",\"var(--ch-7)\"],\" \",[\"this\",\"var(--ch-2)\"],[\")\",\"var(--ch-4)\"],\"\\n      \",[\"promiseJobs.\",\"var(--ch-4)\"],[\"push\",\"var(--ch-5)\"],[\"(job.callback)\",\"var(--ch-4)\"],\"\\n    \",[\"}\",\"var(--ch-4)\"],\"\\n    \",[\"if\",\"var(--ch-7)\"],\" \",[\"(loopRunning\",\"var(--ch-4)\"],\" \",[\"===\",\"var(--ch-7)\"],\" \",[\"false\",\"var(--ch-2)\"],[\") {\",\"var(--ch-4)\"],\"\\n      \",[\"loopRunning\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"true\",\"var(--ch-2)\"],\"\\n      \",[\"this\",\"var(--ch-2)\"],[\".\",\"var(--ch-4)\"],[\"workLoop\",\"var(--ch-5)\"],[\"()\",\"var(--ch-4)\"],\"\\n    \",[\"}\",\"var(--ch-4)\"],\"\\n  \",[\"}\",\"var(--ch-4)\"],\"\\n\\n  \",[\"then\",\"var(--ch-5)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"(onResolved\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\", onRejected\",\"var(--ch-3)\"],[\"?:\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\")\",\"var(--ch-3)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n    \",[\"return new\",\"var(--ch-7)\"],\" \",[\"XPromise\",\"var(--ch-5)\"],[\"((\",\"var(--ch-4)\"],[\"resolveNext\",\"var(--ch-3)\"],[\",\",\"var(--ch-4)\"],\" \",[\"rejectNext\",\"var(--ch-3)\"],[\")\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n      \",[\"const\",\"var(--ch-7)\"],\" \",[\"_resolved\",\"var(--ch-5)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"()\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n        \",[\"const\",\"var(--ch-7)\"],\" \",[\"value\",\"var(--ch-2)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"this\",\"var(--ch-2)\"],[\".PromiseResult\",\"var(--ch-4)\"],\"\\n        \",[\"try\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n          \",[\"if\",\"var(--ch-7)\"],\" \",[\"(\",\"var(--ch-4)\"],[\"!\",\"var(--ch-7)\"],[\"isFunction\",\"var(--ch-5)\"],[\"(onResolved)) {\",\"var(--ch-4)\"],\"\\n            \",[\"resolveNext\",\"var(--ch-5)\"],[\"(value)\",\"var(--ch-4)\"],\"\\n          \",[\"}\",\"var(--ch-4)\"],\" \",[\"else\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n            \",[\"const\",\"var(--ch-7)\"],\" \",[\"res\",\"var(--ch-2)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"onResolved\",\"var(--ch-5)\"],[\"(value)\",\"var(--ch-4)\"],\"\\n            \",[\"if\",\"var(--ch-7)\"],\" \",[\"(res\",\"var(--ch-4)\"],\" \",[\"instanceof\",\"var(--ch-7)\"],\" \",[\"XPromise\",\"var(--ch-3)\"],[\") {\",\"var(--ch-4)\"],\"\\n              \",[\"res.\",\"var(--ch-4)\"],[\"then\",\"var(--ch-5)\"],[\"(resolveNext, rejectNext)\",\"var(--ch-4)\"],\"\\n            \",[\"}\",\"var(--ch-4)\"],\" \",[\"else\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n              \",[\"resolveNext\",\"var(--ch-5)\"],[\"(res)\",\"var(--ch-4)\"],\"\\n            \",[\"}\",\"var(--ch-4)\"],\"  \\n          \",[\"}\",\"var(--ch-4)\"],\"\\n        \",[\"}\",\"var(--ch-4)\"],\" \",[\"catch\",\"var(--ch-7)\"],\" \",[\"(err) {\",\"var(--ch-4)\"],\"\\n          \",[\"rejectNext\",\"var(--ch-5)\"],[\"(err)\",\"var(--ch-4)\"],\"\\n        \",[\"}\",\"var(--ch-4)\"],\"\\n      \",[\"}\",\"var(--ch-4)\"],\"\\n\\n      \",[\"const\",\"var(--ch-7)\"],\" \",[\"_rejected\",\"var(--ch-5)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"()\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n        \",[\"const\",\"var(--ch-7)\"],\" \",[\"value\",\"var(--ch-2)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"this\",\"var(--ch-2)\"],[\".PromiseResult\",\"var(--ch-4)\"],\"\\n        \",[\"try\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n          \",[\"if\",\"var(--ch-7)\"],\" \",[\"(\",\"var(--ch-4)\"],[\"!\",\"var(--ch-7)\"],[\"isFunction\",\"var(--ch-5)\"],[\"(onRejected)) {\",\"var(--ch-4)\"],\"\\n            \",[\"rejectNext\",\"var(--ch-5)\"],[\"(value)\",\"var(--ch-4)\"],\"\\n          \",[\"}\",\"var(--ch-4)\"],\" \",[\"else\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n            \",[\"const\",\"var(--ch-7)\"],\" \",[\"res\",\"var(--ch-2)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"onRejected\",\"var(--ch-5)\"],[\"(value)\",\"var(--ch-4)\"],\"\\n            \",[\"if\",\"var(--ch-7)\"],\" \",[\"(res\",\"var(--ch-4)\"],\" \",[\"instanceof\",\"var(--ch-7)\"],\" \",[\"XPromise\",\"var(--ch-3)\"],[\") {\",\"var(--ch-4)\"],\"\\n              \",[\"res.\",\"var(--ch-4)\"],[\"then\",\"var(--ch-5)\"],[\"(resolveNext, rejectNext)\",\"var(--ch-4)\"],\"\\n            \",[\"}\",\"var(--ch-4)\"],\" \",[\"else\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n              \",[\"resolveNext\",\"var(--ch-5)\"],[\"(res)\",\"var(--ch-4)\"],\"\\n            \",[\"}\",\"var(--ch-4)\"],\"\\n          \",[\"}\",\"var(--ch-4)\"],\"\\n        \",[\"}\",\"var(--ch-4)\"],\" \",[\"catch\",\"var(--ch-7)\"],\" \",[\"(err) {\",\"var(--ch-4)\"],\"\\n          \",[\"rejectNext\",\"var(--ch-5)\"],[\"(err)\",\"var(--ch-4)\"],\"\\n        \",[\"}\",\"var(--ch-4)\"],\"\\n      \",[\"}\",\"var(--ch-4)\"],\"\\n      \",[\"switch\",\"var(--ch-7)\"],[\"(\",\"var(--ch-4)\"],[\"this\",\"var(--ch-2)\"],[\".PromiseState) {\",\"var(--ch-4)\"],\"\\n        \",[\"// 状态为 pending 时，收集回调\",\"var(--ch-1)\"],\"\\n        \",[\"case\",\"var(--ch-7)\"],\" \",[\"pending:\",\"var(--ch-4)\"],\" \\n          \",[\"PromiseFulfillReactions.\",\"var(--ch-4)\"],[\"push\",\"var(--ch-5)\"],[\"({\",\"var(--ch-4)\"],\"\\n            \",[\"key:\",\"var(--ch-4)\"],\" \",[\"this\",\"var(--ch-2)\"],[\",\",\"var(--ch-4)\"],\"\\n            \",[\"callback: _resolved\",\"var(--ch-4)\"],\"\\n          \",[\"})\",\"var(--ch-4)\"],\"\\n          \",[\"PromiseRejectReactions.\",\"var(--ch-4)\"],[\"push\",\"var(--ch-5)\"],[\"({\",\"var(--ch-4)\"],\"\\n            \",[\"key:\",\"var(--ch-4)\"],\" \",[\"this\",\"var(--ch-2)\"],[\",\",\"var(--ch-4)\"],\"\\n            \",[\"callback: _rejected\",\"var(--ch-4)\"],\"\\n          \",[\"})\",\"var(--ch-4)\"],\"\\n          \",[\"break\",\"var(--ch-7)\"],\"\\n        \",[\"// 状态已经改变了，就直接执行回调\",\"var(--ch-1)\"],\"\\n        \",[\"case\",\"var(--ch-7)\"],\" \",[\"fulfilled:\",\"var(--ch-4)\"],\"\\n          \",[\"promiseJobs.\",\"var(--ch-4)\"],[\"push\",\"var(--ch-5)\"],[\"(_resolved)\",\"var(--ch-4)\"],\"\\n          \",[\"break\",\"var(--ch-7)\"],\"\\n        \",[\"case\",\"var(--ch-7)\"],\" \",[\"rejected:\",\"var(--ch-4)\"],\"\\n          \",[\"promiseJobs.\",\"var(--ch-4)\"],[\"push\",\"var(--ch-5)\"],[\"(_rejected)\",\"var(--ch-4)\"],\"\\n          \",[\"break\",\"var(--ch-7)\"],\"\\n      \",[\"}\",\"var(--ch-4)\"],\"\\n    \",[\"})\",\"var(--ch-4)\"],\"\\n  \",[\"}\",\"var(--ch-4)\"],\"\\n\\n  \",[\"workLoop\",\"var(--ch-5)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"()\",\"var(--ch-3)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n    \",[\"setTimeout\",\"var(--ch-5)\"],[\"(()\",\"var(--ch-4)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n      \",[\"let\",\"var(--ch-7)\"],\" \",[\"cb\",\"var(--ch-4)\"],\"\\n      \",[\"while\",\"var(--ch-7)\"],[\"(cb\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"promiseJobs.\",\"var(--ch-4)\"],[\"shift\",\"var(--ch-5)\"],[\"()) {\",\"var(--ch-4)\"],\"\\n        \",[\"cb\",\"var(--ch-5)\"],[\"()\",\"var(--ch-4)\"],\"\\n      \",[\"}\",\"var(--ch-4)\"],\"\\n      \",[\"loopRunning\",\"var(--ch-4)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"false\",\"var(--ch-2)\"],\"\\n    \",[\"},\",\"var(--ch-4)\"],\" \",[\"0\",\"var(--ch-2)\"],[\")\",\"var(--ch-4)\"],\"\\n  \",[\"}\",\"var(--ch-4)\"],\"\\n\\n  \",[\"catch\",\"var(--ch-5)\"],\" \",[\"=\",\"var(--ch-7)\"],\" \",[\"(onRejected\",\"var(--ch-3)\"],[\":\",\"var(--ch-7)\"],\" \",[\"any\",\"var(--ch-2)\"],[\")\",\"var(--ch-3)\"],\" \",[\"=\u003e\",\"var(--ch-7)\"],\" \",[\"{\",\"var(--ch-4)\"],\"\\n    \",[\"return\",\"var(--ch-7)\"],\" \",[\"this\",\"var(--ch-2)\"],[\".\",\"var(--ch-4)\"],[\"then\",\"var(--ch-5)\"],[\"(\",\"var(--ch-4)\"],[\"null\",\"var(--ch-2)\"],[\", onRejected)\",\"var(--ch-4)\"],\"\\n  \",[\"}\",\"var(--ch-4)\"],\"\\n\",[\"}\",\"var(--ch-3)\"]],\"annotations\":[],\"themeName\":\"github-from-css\",\"style\":{\"color\":\"var(--ch-4)\",\"background\":\"var(--ch-16)\",\"colorScheme\":\"var(--ch-0)\"}}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"19:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n17:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"usehook - 前端顶级精英俱乐部\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"最好的前端学习网站, react, react19, react hooks, zustand\"}],[\"$\",\"meta\",\"3\",{\"name\":\"author\",\"content\":\"这波能反杀\"}],[\"$\",\"meta\",\"4\",{\"name\":\"keywords\",\"content\":\"react, react19, react hooks, zustand\"}],[\"$\",\"link\",\"5\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n"])</script><script>self.__next_f.push([1,"15:null\n"])</script></body></html>